{"id":0,"registry":{"0":{"submorphs":[{"__isSmartRef__":true,"id":1}],"scripts":[{"__isSmartRef__":true,"id":8}],"id":"3E26B7A3-C332-430D-A718-8548790B403B","shape":{"__isSmartRef__":true,"id":9},"droppingEnabled":true,"halosEnabled":true,"registeredForMouseEvents":true,"showsHalos":false,"name":"NotificationRectangle","partsBinMetaInfo":{"__isSmartRef__":true,"id":10},"eventHandler":{"__isSmartRef__":true,"id":31},"derivationIds":[127,"F0291F62-F100-480C-AEBF-0230398F7983","AE8B5ED7-E305-45BC-BE4A-1C28A49EE12B","39BA345C-17FA-45A0-BAC2-F0CF5654ACF8","FE91EA31-D8AE-461B-8A49-95DA5FBAE5B4","F38439A3-2F4E-4AC2-BF73-2633C00B1393","6748F5B5-2284-4748-A6EE-F1A261CBAD0B","BBAFB862-93AE-4F89-BCFF-9F1C67B7FE4C","7EC17E78-593A-4CC8-B7E3-859BCBBFE785","BD8BECDB-A9A1-4009-B433-C925F0AFCCFC","F2677A9D-5855-4DF2-B248-94545B34B762","D52188B3-7DC0-410E-96B1-50892AC00A37","1FB00C34-E9E9-4AB6-ACB2-A3E013250A47","0C26A788-3F6B-4A6D-820D-B5EBA5F57E29","741FF1E0-6B75-44DB-9889-797F53368234"],"partTests":{"__isSmartRef__":true,"id":32},"_ClipMode":"visible","moved":true,"isBeingDragged":false,"layout":{"__isSmartRef__":true,"id":46},"isInLayoutCycle":false,"isCopyMorphRef":true,"morphRefId":1,"counter":0,"_Rotation":0,"_Scale":0.9900990099009901,"doNotSerialize":["lastUpdate","timeOpened"],"knownSessions":[],"__serializedExpressions__":["_Position"],"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":47},"__LivelyClassName__":"lively.morphic.Box","__SourceModuleName__":"Global.lively.morphic.Core","_Position":"lively.pt(0.0,0.0)"},"1":{"submorphs":[],"scripts":[],"id":"5306D877-FE05-45C3-AEAE-FDF497C1530F","shape":{"__isSmartRef__":true,"id":2},"grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"fixedWidth":true,"fixedHeight":true,"allowsInput":true,"_OverflowMode":"visible","_FontFamily":"Arial, sans-serif","registeredForMouseEvents":true,"_MaxTextWidth":null,"_MaxTextHeight":22,"showsHalos":false,"_FontSize":8,"name":"notificationCounter","partsBinMetaInfo":{"__isSmartRef__":true,"id":3},"textChunks":[{"__isSmartRef__":true,"id":4}],"charsReplaced":"some text","lastFindLoc":-9,"prevScroll":[0,0],"isLabel":true,"_ClipMode":"visible","_WhiteSpaceHandling":"pre","allowInput":false,"eventsAreIgnored":false,"eventHandler":{"__isSmartRef__":true,"id":6},"derivationIds":[2033,"FBE8F087-16F0-4894-A553-8226AAA8932E","630166BE-5028-44E5-BDEC-21668735817A","A70039BC-2A1A-491C-8051-92D4A502EED2"],"owner":{"__isSmartRef__":true,"id":0},"layout":{"__isSmartRef__":true,"id":7},"_HandStyle":"default","_Rotation":0,"_Scale":1,"_Align":"center","__serializedExpressions__":["_Position","textColor","distanceToDragEvent","_TextColor"],"__LivelyClassName__":"lively.morphic.Text","__SourceModuleName__":"Global.lively.morphic.TextCore","_Position":"lively.pt(0.0,3.1)","textColor":"Color.rgb(0,0,0)","distanceToDragEvent":"lively.pt(34.7,-9.7)","_TextColor":"Color.rgb(204,204,204)"},"2":{"fill":null,"_BorderWidth":0,"_Fill":null,"_BorderRadius":0,"_Opacity":1,"_BorderStyle":"solid","_AppearanceStylingMode":false,"_BorderStylingMode":false,"__serializedExpressions__":["_Position","_Extent","_BorderColor","_Padding"],"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(19.1,16.0)","_BorderColor":"Color.rgb(0,0,0)","_Padding":"lively.rect(1,1,0,0)"},"3":{"partsSpaceName":"PartsBin/Text/","migrationLevel":2,"partName":"Label","__serializedExpressions__":["lastModifiedDate"],"__LivelyClassName__":"lively.PartsBin.PartsBinMetaInfo","__SourceModuleName__":"Global.lively.PartsBin","lastModifiedDate":"new Date(\"Wed Sep 05 2012 16:01:35 GMT-0700 (Pacific Daylight Time)\")"},"4":{"style":{"__isSmartRef__":true,"id":5},"chunkOwner":{"__isSmartRef__":true,"id":1},"_id":"_11770","storedString":"0","__LivelyClassName__":"lively.morphic.TextChunk","__SourceModuleName__":"Global.lively.morphic.TextCore"},"5":{"__LivelyClassName__":"lively.morphic.TextEmphasis","__SourceModuleName__":"Global.lively.morphic.TextCore"},"6":{"morph":{"__isSmartRef__":true,"id":1},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"7":{"scaleHorizontal":false,"scaleVertical":false,"centeredVertical":true,"centeredHorizontal":true,"adjustForNewBounds":false,"resizeHeight":false,"resizeWidth":false},"8":{"target":{"__isSmartRef__":true,"id":0},"selector":"update","args":[],"stopped":false,"tickTime":300000,"__LivelyClassName__":"lively.morphic.TargetScript","__SourceModuleName__":"Global.lively.morphic.Core"},"9":{"_BorderWidth":1.754,"_ClipMode":"visible","_BorderRadius":6.39,"_Opacity":1,"_BorderStyle":"solid","_AppearanceStylingMode":false,"_BorderStylingMode":false,"__serializedExpressions__":["position","_Extent","_BorderColor","_Fill","_Padding"],"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(19.1,22.1)","_BorderColor":"Color.rgb(240,240,240)","_Fill":"Color.rgb(255,255,255)","_Padding":"lively.rect(0,0,0,0)"},"10":{"partsSpaceName":"PartsBin/Collaboration","comment":"A plain simple rectangle, counting the events related to other worlds.","migrationLevel":8,"partName":"NotificationRectangle","changes":[{"__isSmartRef__":true,"id":11},{"__isSmartRef__":true,"id":12},{"__isSmartRef__":true,"id":13},{"__isSmartRef__":true,"id":14},{"__isSmartRef__":true,"id":15},{"__isSmartRef__":true,"id":16},{"__isSmartRef__":true,"id":17},{"__isSmartRef__":true,"id":18},{"__isSmartRef__":true,"id":19},{"__isSmartRef__":true,"id":20},{"__isSmartRef__":true,"id":21},{"__isSmartRef__":true,"id":22},{"__isSmartRef__":true,"id":23},{"__isSmartRef__":true,"id":24},{"__isSmartRef__":true,"id":25},{"__isSmartRef__":true,"id":26},{"__isSmartRef__":true,"id":27},{"__isSmartRef__":true,"id":28},{"__isSmartRef__":true,"id":29},{"__isSmartRef__":true,"id":30}],"__serializedExpressions__":["lastModifiedDate"],"__LivelyClassName__":"lively.PartsBin.PartsBinMetaInfo","__SourceModuleName__":"Global.lively.PartsBin","lastModifiedDate":"new Date(\"Wed Nov 27 2013 19:13:41 GMT-0800 (Pacific Standard Time)\")"},"11":{"author":"robertkrahn","message":"no comment","id":"FBBB9C99-B61C-4D5F-8750-6E2987DF0C9C","__serializedExpressions__":["date"],"date":"new Date(\"Thu Jun 20 2013 15:16:24 GMT-0700 (Pacific Daylight Time)\")"},"12":{"author":"robertkrahn","message":"no comment","id":"67FD74CD-7AE4-4050-ADC7-4DF73804258D","__serializedExpressions__":["date"],"date":"new Date(\"Thu May 30 2013 00:18:06 GMT-0700 (Pacific Daylight Time)\")"},"13":{"author":"jenslincke","message":"no comment","id":"AEB2F41B-2C88-4BBA-8875-93CD17CBA1C8","__serializedExpressions__":["date"],"date":"new Date(\"Wed Jan 23 2013 03:57:18 GMT-0800 (Pacific Standard Time)\")"},"14":{"author":"undefined","message":"whoopsie","id":"3F17A2D2-3C24-424B-B0FA-E43112267D23","__serializedExpressions__":["date"],"date":"new Date(\"Thu May 03 2012 06:51:36 GMT-0700 (Pacific Daylight Time)\")"},"15":{"author":"undefined","message":"whoopsie","id":"CEA5DCD5-2DB7-40AD-A776-262A7A0666FC","__serializedExpressions__":["date"],"date":"new Date(\"Thu May 03 2012 06:51:30 GMT-0700 (Pacific Daylight Time)\")"},"16":{"author":"undefined","message":"sorry","id":"44B56D2E-9B59-4C67-A305-49A6E10E66C2","__serializedExpressions__":["date"],"date":"new Date(\"Wed Mar 14 2012 02:53:45 GMT-0700 (Pacific Daylight Time)\")"},"17":{"author":"fbo","message":"","id":"BD1C654D-9100-4B66-BC62-B15FF2498B2B","__serializedExpressions__":["date"],"date":"new Date(\"Fri Feb 24 2012 17:59:09 GMT-0800 (Pacific Standard Time)\")"},"18":{"author":"undefined","message":"css transitions","id":"1004E0FC-D96B-4F40-B3E0-F514A3FCFFD7","__serializedExpressions__":["date"],"date":"new Date(\"Wed Mar 14 2012 02:42:26 GMT-0700 (Pacific Daylight Time)\")"},"19":{"author":"undefined","message":"suddenly, the rectangle became a CarDemo","id":"B5083AA8-9BAE-48DD-A6B4-FD7DB3998350","__serializedExpressions__":["date"],"date":"new Date(\"Mon Apr 09 2012 04:42:07 GMT-0700 (Pacific Daylight Time)\")"},"20":{"author":"bgnauk","message":"no comment","id":"0124E570-50B7-4CE3-83A1-6E7BA89B5CD8","__serializedExpressions__":["date"],"date":"new Date(\"Mon Jun 18 2012 10:35:08 GMT-0700 (Pacific Daylight Time)\")"},"21":{"author":"jenslincke","message":"I want my blue rectangle back!","id":"5AA9291A-869F-4D36-8095-4721B5A5B205","__serializedExpressions__":["date"],"date":"new Date(\"Thu Nov 22 2012 01:35:51 GMT-0800 (Pacific Standard Time)\")"},"22":{"author":"jenslincke","message":"no comment","id":"A4B86A7E-A398-4C29-BEE0-4AA045ABABD2","__serializedExpressions__":["date"],"date":"new Date(\"Fri Jan 18 2013 07:42:31 GMT-0800 (Pacific Standard Time)\")"},"23":{"author":"jenslincke","message":"added legend","id":"7ADA3049-56C1-4D32-874B-F664A79DDB20","__serializedExpressions__":["date"],"date":"new Date(\"Fri Jan 18 2013 07:47:05 GMT-0800 (Pacific Standard Time)\")"},"24":{"author":"SAPLivelyScreen","message":"no comment","id":"EF145198-0649-41BD-A92E-521D98FEC49D","__serializedExpressions__":["date"],"date":"new Date(\"Wed May 29 2013 15:36:50 GMT-0700 (Pacific Daylight Time)\")"},"25":{"author":"SAPLivelyScreen","message":"no comment","id":"7A44D8CA-6D5F-42A3-A4B4-4D7F51EECA52","__serializedExpressions__":["date"],"date":"new Date(\"Tue Jun 18 2013 11:49:27 GMT-0700 (Pacific Daylight Time)\")"},"26":{"author":"robertkrahn","message":"no comment","id":"A452871F-4EB9-45D1-94B8-6065CBA7B8FD","__serializedExpressions__":["date"],"date":"new Date(\"Mon Jul 29 2013 23:20:51 GMT-0700 (Pacific Daylight Time)\")"},"27":{"author":"larswassermann","message":"","id":"48C07469-5B00-4530-8466-428D0E1CF485","__serializedExpressions__":["date"],"date":"new Date(\"Wed Nov 27 2013 17:25:41 GMT-0800 (Pacific Standard Time)\")"},"28":{"author":"larswassermann","message":"improved onClick behavior","id":"591155EF-887F-4ECD-89B3-586856B3F086","__serializedExpressions__":["date"],"date":"new Date(\"Wed Nov 27 2013 18:42:13 GMT-0800 (Pacific Standard Time)\")"},"29":{"author":"larswassermann","message":"improved visuals","id":"A69EB385-277D-48AD-B02A-2C8FA3962DCD","__serializedExpressions__":["date"],"date":"new Date(\"Wed Nov 27 2013 19:13:40 GMT-0800 (Pacific Standard Time)\")"},"30":{"__serializedExpressions__":["date"],"author":"larswassermann","message":"update the worlds-viewer after opening","id":"DD674A87-110D-4564-862D-93B46100846F","date":"new Date(\"Tue Dec 03 2013 15:39:37 GMT-0800 (Pacific Standard Time)\")"},"31":{"morph":{"__isSmartRef__":true,"id":0},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"32":{"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":33}},"33":{"test01IsMorph":{"__isSmartRef__":true,"id":34},"testNoDelta":{"__isSmartRef__":true,"id":37},"testLostSessions":{"__isSmartRef__":true,"id":40},"testNewSessions":{"__isSmartRef__":true,"id":43}},"34":{"varMapping":{"__isSmartRef__":true,"id":35},"source":"function test01IsMorph(aPart) {\n    this.assert(aPart.isMorph, 'rectangle should be a morph');\n}","funcProperties":{"__isSmartRef__":true,"id":36},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"35":{"this":{"__isSmartRef__":true,"id":32}},"36":{},"37":{"varMapping":{"__isSmartRef__":true,"id":38},"source":"function testNoDelta(aPart) {\n    var known = Array.range(1, 5).map(function(ea) { return {id: ea}; }),\n        newS = known,\n        delta = lively.net.tools.Lively2Lively.sessionDeltaOf(known, newS);\n    \n    this.assert(delta.length == 2\n        && delta[0].length == 0\n        && delta[1].length == 0)\n\n}","funcProperties":{"__isSmartRef__":true,"id":39},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"38":{"this":{"__isSmartRef__":true,"id":32}},"39":{},"40":{"varMapping":{"__isSmartRef__":true,"id":41},"source":"function testLostSessions(aPart) {\n    var known = Array.range(1, 5).map(function(ea) { return {id: ea}; }),\n        newS = [{id: 2}, {id: 4}],\n        delta = lively.net.tools.Lively2Lively.sessionDeltaOf(known, newS);\n    \n    this.assert(delta.length == 2\n        && delta[0].length == 3\n        && delta[1].length == 0\n        && delta[0][0].id == 1\n        && delta[0][1].id == 3\n        && delta[0][2].id == 5)\n\n}","funcProperties":{"__isSmartRef__":true,"id":42},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"41":{"this":{"__isSmartRef__":true,"id":32}},"42":{},"43":{"varMapping":{"__isSmartRef__":true,"id":44},"source":"function testNewSessions(aPart) {\n    var newS = Array.range(1, 5).map(function(ea) { return {id: ea}; }),\n        known = [{id: 2}, {id: 4}],\n        delta = lively.net.tools.Lively2Lively.sessionDeltaOf(known, newS);\n    \n    this.assert(delta.length == 2\n        && delta[0].length == 0\n        && delta[1].length == 3\n        && delta[1][0].id == 1\n        && delta[1][1].id == 3\n        && delta[1][2].id == 5)\n\n}","funcProperties":{"__isSmartRef__":true,"id":45},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"44":{"this":{"__isSmartRef__":true,"id":32}},"45":{},"46":{"centeredVertical":true},"47":{"onMouseUp":{"__isSmartRef__":true,"id":48},"updateCounter":{"__isSmartRef__":true,"id":55},"reset":{"__isSmartRef__":true,"id":58},"update":{"__isSmartRef__":true,"id":61},"onLoad":{"__isSmartRef__":true,"id":64}},"48":{"varMapping":{"__isSmartRef__":true,"id":49},"source":"function onMouseUp() {\n    var morph = this.get(\"Watching worlds evolve\")\n    if (morph) {\n        morph.getWindow().comeForward()\n    } else {\n        var part = lively.PartsBin.getPart(\"WorldsEventListener\", \"PartsBin/Collaboration\");\n        part.openInWorldCenter();\n        part.comeForward();\n        part.targetMorph.lastUpdate = this.timeOpened;\n        if (this.sessionsOpened)\n            part.targetMorph.activeSessions = this.sessionsOpened;\n        part.targetMorph.updateList();\n    }\n    this.reset();\n}","funcProperties":{"__isSmartRef__":true,"id":54},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"49":{"this":{"__isSmartRef__":true,"id":0},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":50}},"50":{"$super":{"__isSmartRef__":true,"id":51}},"51":{"varMapping":{"__isSmartRef__":true,"id":52},"source":"function () {\n                    try {\n                        return obj.constructor.prototype[name].apply(obj, arguments)\n                    } catch (e) {\n                        if ($world)\n                            $world.logError(e, 'Error in $super call')\n                        else\n                            alert('Error in $super call: ' + e + '\\n' + e.stack);\n                        return null;\n                    }\n                }","funcProperties":{"__isSmartRef__":true,"id":53},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"52":{"obj":{"__isSmartRef__":true,"id":0},"name":"onMouseUp"},"53":{},"54":{"__serializedExpressions__":["timestamp"],"user":"larswassermann","tags":[],"timestamp":"new Date(\"Tue Dec 03 2013 15:38:34 GMT-0800 (Pacific Standard Time)\")"},"55":{"varMapping":{"__isSmartRef__":true,"id":56},"source":"function updateCounter(value) {\n    this.counter += value;\n    this.get('notificationCounter').textString = this.counter;\n}","funcProperties":{"__isSmartRef__":true,"id":57},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"56":{"this":{"__isSmartRef__":true,"id":0}},"57":{"user":"larswassermann","tags":[],"__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Tue Nov 26 2013 16:54:33 GMT-0800 (Pacific Standard Time)\")"},"58":{"varMapping":{"__isSmartRef__":true,"id":59},"source":"function reset() {\n    this.counter = 0;\n    this.updateCounter(0);\n    this.knownSessions = [];\n    this.lastUpdate = null;\n    this.timeOpened = new Date();\n    this.sessionsOpened = undefined;\n    this.doNotSerialize = ['lastUpdate', 'timeOpened'];\n}","funcProperties":{"__isSmartRef__":true,"id":60},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"59":{"this":{"__isSmartRef__":true,"id":0}},"60":{"user":"larswassermann","tags":[],"__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Wed Nov 27 2013 17:11:43 GMT-0800 (Pacific Standard Time)\")"},"61":{"varMapping":{"__isSmartRef__":true,"id":62},"source":"function update() {\n    var self = this;\n    var lastUpdate = this.lastUpdate || this.timeOpened;\n    lively.net.tools.Lively2Lively.withWikiRecordsDo(lastUpdate, function(err, dbRecords) {\n        if (err) return;\n        self.updateCounter(dbRecords.length);\n        self.lastUpdate = new Date();\n    });\n    \n    lively.net.tools.Lively2Lively.withSessionsAndDeltaDo(\n        self.knownSessions, \n        function(err, activeS, newS, lostS) {\n            if (err) return;\n            self.updateCounter(newS.length);\n            self.updateCounter(lostS.length);\n            self.knownSessions = activeS;\n            if (self.sessionsOpened == undefined){\n                self.sessionsOpened = activeS;\n                self.updateCounter(-newS.length);\n            }\n        })\n}","funcProperties":{"__isSmartRef__":true,"id":63},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"62":{"this":{"__isSmartRef__":true,"id":0}},"63":{"user":"larswassermann","tags":[],"__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Wed Nov 27 2013 17:09:45 GMT-0800 (Pacific Standard Time)\")"},"64":{"varMapping":{"__isSmartRef__":true,"id":65},"source":"function onLoad() {\n    this.get('notificationCounter').applyStyle({\n        handStyle: 'default'\n    });\n    this.reset();\n    this.startStepping(5 /*min*/ * 60 * 1000, \"update\")\n}","funcProperties":{"__isSmartRef__":true,"id":66},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"65":{"this":{"__isSmartRef__":true,"id":0}},"66":{"user":"larswassermann","tags":[],"__serializedExpressions__":["timestamp"],"timestamp":"new Date(\"Wed Nov 27 2013 17:20:08 GMT-0800 (Pacific Standard Time)\")"},"isSimplifiedRegistry":true}}