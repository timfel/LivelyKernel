{"id":0,"registry":{"0":{"submorphs":[],"scripts":[],"id":"324C5BEC-5664-49AD-AE50-4F3AD40CB933","shape":{"__isSmartRef__":true,"id":1},"droppingEnabled":true,"halosEnabled":true,"registeredForMouseEvents":true,"_Position":{"__isSmartRef__":true,"id":7},"showsHalos":false,"name":"Thing","partsBinMetaInfo":{"__isSmartRef__":true,"id":8},"__SourceModuleName__":"Global.lively.morphic.Core","renderContextTable":{"__isSmartRef__":true,"id":83},"eventHandler":{"__isSmartRef__":true,"id":84},"attributeConnections":[],"doNotSerialize":[],"doNotCopyProperties":[],"derivationIds":[127,"F0291F62-F100-480C-AEBF-0230398F7983","AE8B5ED7-E305-45BC-BE4A-1C28A49EE12B","39BA345C-17FA-45A0-BAC2-F0CF5654ACF8","DF863BAB-9987-4611-BCD2-DE9FDCE7D3B5","768ED97D-1E05-415B-AB3F-B6495AC603A0","5A0ECA63-F6E2-4E35-B9A2-75DE2A4C4158","3B4EDC8A-0E99-4F45-A6D5-5CCE7E75BC88","1A900574-7D84-44F3-BB9D-1A1E26FDDB9B","383B3B54-4D0D-42E5-88C6-460045549029","EFC22A04-8B3C-48A8-9C5F-1EBC66DFD6D6","52D7E09F-EA1F-44D5-A893-F72A70D40429","CAC332B2-DA3A-4534-B3C7-E03D31DE9D2C","2CDD083E-3AB7-4BB9-B6D1-A70716226BDF","B4327E15-A3DA-44A6-89B0-71AFB39350AA","D2E0258B-443A-444C-8640-C595ECC95152","6C8F2B5B-D9E4-4742-B4A1-DA08C3B66E3A","34B4B715-9D86-4D1A-921B-5340CDC05F73","4CA32288-0E12-49F5-A485-634D7D327287","5941FCB6-8C08-405A-B2C2-D84C19F702E2","7BA243A0-B441-41E9-B4AE-A18EDB0F9A8A","C1A510A2-576D-49C6-89EA-56953C5D6FC1","372DAC3D-D2F5-47C2-8538-A2EEE9D3A073","6E3BFF0C-E4EB-4D35-959F-9C12F885012C","5D157E3A-5D4F-4C0A-888F-5FE24CBFC6E5","8C8C94D0-B291-47D8-8B8D-F606AF1A59B1","4794D8F3-DD25-4AFF-A687-079AB3EB7B71"],"partTests":{"__isSmartRef__":true,"id":85},"isBeingDragged":false,"priorExtent":{"__isSmartRef__":true,"id":90},"moved":true,"_ClipMode":"visible","tile":null,"thing":null,"prevScroll":[0,0],"occludedTiles":null,"_Rotation":0,"_Scale":1.002003004005006,"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":91},"__LivelyClassName__":"lively.morphic.Box"},"1":{"position":{"__isSmartRef__":true,"id":2},"_Extent":{"__isSmartRef__":true,"id":3},"_BorderWidth":1.148,"_BorderColor":{"__isSmartRef__":true,"id":4},"_Fill":null,"__SourceModuleName__":"Global.lively.morphic.Shapes","renderContextTable":{"__isSmartRef__":true,"id":5},"_ClipMode":"visible","_Padding":{"__isSmartRef__":true,"id":6},"_BorderRadius":0,"_Opacity":1,"_BorderStyle":"solid","__LivelyClassName__":"lively.morphic.Shapes.Rectangle"},"2":{"x":0,"y":0,"__SourceModuleName__":"Global.lively.morphic.Graphics","__LivelyClassName__":"Point"},"3":{"x":48,"y":48,"__SourceModuleName__":"Global.lively.morphic.Graphics","__LivelyClassName__":"Point"},"4":{"r":0,"g":0,"b":0.8,"a":1,"__SourceModuleName__":"Global.lively.morphic.Graphics","__LivelyClassName__":"Color"},"5":{"init":"initHTML","appendShape":"renderHTML","setPosition":"setPositionHTML","setExtent":"setExtentHTML","setPadding":"setPaddingHTML","setFill":"setFillHTML","setBorderColor":"setBorderColorHTML","setBorderWidth":"setBorderWidthHTML","setStrokeOpacity":"setStrokeOpacityHTML","setBorderRadius":"setBorderRadiusHTML","setBorderStyle":"setBorderStyleHTML","setOpacity":"setOpacityHTML"},"6":{"x":0,"y":0,"width":0,"height":0,"__SourceModuleName__":"Global.lively.morphic.Graphics","__LivelyClassName__":"Rectangle"},"7":{"x":0,"y":0,"__LivelyClassName__":"Point","__SourceModuleName__":"Global.lively.morphic.Graphics"},"8":{"partsSpaceName":"PartsBin/FreedomOfSpeech/","__SourceModuleName__":"Global.lively.PartsBin","comment":"A thing that renders itself onto a tile and tells the occluded tiles about the obstacle","migrationLevel":4,"partName":"Thing","changes":[{"__isSmartRef__":true,"id":9},{"__isSmartRef__":true,"id":11},{"__isSmartRef__":true,"id":13},{"__isSmartRef__":true,"id":15},{"__isSmartRef__":true,"id":17},{"__isSmartRef__":true,"id":19},{"__isSmartRef__":true,"id":21},{"__isSmartRef__":true,"id":23},{"__isSmartRef__":true,"id":25},{"__isSmartRef__":true,"id":27},{"__isSmartRef__":true,"id":29},{"__isSmartRef__":true,"id":31},{"__isSmartRef__":true,"id":33},{"__isSmartRef__":true,"id":35},{"__isSmartRef__":true,"id":37},{"__isSmartRef__":true,"id":39},{"__isSmartRef__":true,"id":41},{"__isSmartRef__":true,"id":43},{"__isSmartRef__":true,"id":45},{"__isSmartRef__":true,"id":47},{"__isSmartRef__":true,"id":49},{"__isSmartRef__":true,"id":51},{"__isSmartRef__":true,"id":53},{"__isSmartRef__":true,"id":55},{"__isSmartRef__":true,"id":57},{"__isSmartRef__":true,"id":59},{"__isSmartRef__":true,"id":61},{"__isSmartRef__":true,"id":63},{"__isSmartRef__":true,"id":65},{"__isSmartRef__":true,"id":67},{"__isSmartRef__":true,"id":69},{"__isSmartRef__":true,"id":71},{"__isSmartRef__":true,"id":73},{"__isSmartRef__":true,"id":75},{"__isSmartRef__":true,"id":77},{"__isSmartRef__":true,"id":79},{"__isSmartRef__":true,"id":81}],"revisionOnLoad":158803,"__LivelyClassName__":"lively.PartsBin.PartsBinMetaInfo"},"9":{"date":{"__isSmartRef__":true,"id":10},"author":"tessi","message":"cannot set color to null","id":"C0274811-3BE8-44E9-8C87-99D1F426E9D7"},"10":{"isSerializedDate":true,"string":"Thu May 03 2012 15:21:30 GMT+0200 (CEST)"},"11":{"date":{"__isSmartRef__":true,"id":12},"author":"tessi","message":"reset() sets devStyle; replace get() calls with game() and map()","id":"2AB88C79-A426-4144-9134-5E0717044086"},"12":{"isSerializedDate":true,"string":"Wed Apr 25 2012 12:28:29 GMT+0200 (CEST)"},"13":{"date":{"__isSmartRef__":true,"id":14},"author":"timfelgentreff","message":"no comment","id":"49C8495C-85F0-4B00-AB8B-0086DC167B81"},"14":{"isSerializedDate":true,"string":"Mon Apr 23 2012 15:35:31 GMT+0200 (CEST)"},"15":{"date":{"__isSmartRef__":true,"id":16},"author":"timfelgentreff","message":"setExtent before setPosition","id":"6FDDC46A-4F38-43E9-9258-5570855703AE"},"16":{"isSerializedDate":true,"string":"Mon Apr 23 2012 15:01:01 GMT+0200 (CEST)"},"17":{"date":{"__isSmartRef__":true,"id":18},"author":"timfelgentreff","message":"blue border","id":"BA7A047B-D7E3-4AB9-95E0-0AD19B254904"},"18":{"isSerializedDate":true,"string":"Mon Apr 23 2012 14:59:59 GMT+0200 (CEST)"},"19":{"date":{"__isSmartRef__":true,"id":20},"author":"timfelgentreff","message":"","id":"F01F7BC6-E59F-4B63-8A3D-10C3AC3E34FD"},"20":{"isSerializedDate":true,"string":"Fri Apr 20 2012 08:22:08 GMT+0200 (CEST)"},"21":{"date":{"__isSmartRef__":true,"id":22},"author":"timfelgentreff","message":"","id":"B5D9BC0C-15F0-4AE7-884B-48515F6A030E"},"22":{"isSerializedDate":true,"string":"Thu Apr 19 2012 18:08:19 GMT+0200 (CEST)"},"23":{"date":{"__isSmartRef__":true,"id":24},"author":"timfelgentreff","message":"","id":"07EE540F-D786-49CC-8DD0-56F6B3AC6716"},"24":{"isSerializedDate":true,"string":"Thu Apr 19 2012 17:43:41 GMT+0200 (CEST)"},"25":{"date":{"__isSmartRef__":true,"id":26},"author":"timfelgentreff","message":"","id":"4978F7BB-7FF5-47C1-8A55-6CAB03479B28"},"26":{"isSerializedDate":true,"string":"Thu Apr 19 2012 17:41:12 GMT+0200 (CEST)"},"27":{"date":{"__isSmartRef__":true,"id":28},"author":"timfelgentreff","message":"","id":"18365ED6-1BC8-43AD-ADC8-2B0C8005B784"},"28":{"isSerializedDate":true,"string":"Thu Apr 19 2012 17:23:38 GMT+0200 (CEST)"},"29":{"date":{"__isSmartRef__":true,"id":30},"author":"lauritz","message":"","id":"CFD35308-806E-4804-8706-15DA1CEC5743"},"30":{"isSerializedDate":true,"string":"Thu Apr 19 2012 15:49:16 GMT+0200 (CEST)"},"31":{"date":{"__isSmartRef__":true,"id":32},"author":"timfelgentreff","message":"","id":"DE0AC226-458D-416E-A42C-BAA848650C4C"},"32":{"isSerializedDate":true,"string":"Thu Apr 19 2012 11:28:14 GMT+0200 (CEST)"},"33":{"date":{"__isSmartRef__":true,"id":34},"author":"undefined","message":"suddenly, the rectangle became a CarDemo","id":"B5083AA8-9BAE-48DD-A6B4-FD7DB3998350"},"34":{"isSerializedDate":true,"string":"Mon Apr 09 2012 13:42:07 GMT+0200 (CEST)"},"35":{"date":{"__isSmartRef__":true,"id":36},"author":"undefined","message":"css transitions","id":"1004E0FC-D96B-4F40-B3E0-F514A3FCFFD7"},"36":{"isSerializedDate":true,"string":"Wed Mar 14 2012 10:42:26 GMT+0100 (CET)"},"37":{"date":{"__isSmartRef__":true,"id":38},"author":"fbo","message":"","id":"BD1C654D-9100-4B66-BC62-B15FF2498B2B"},"38":{"isSerializedDate":true,"string":"Sat Feb 25 2012 02:59:09 GMT+0100 (CET)"},"39":{"date":{"__isSmartRef__":true,"id":40},"author":"undefined","message":"sorry","id":"44B56D2E-9B59-4C67-A305-49A6E10E66C2"},"40":{"isSerializedDate":true,"string":"Wed Mar 14 2012 10:53:45 GMT+0100 (CET)"},"41":{"date":{"__isSmartRef__":true,"id":42},"author":"timfelgentreff","message":"","id":"0672C6C8-D032-495B-B9EE-E41F194C86DE"},"42":{"isSerializedDate":true,"string":"Thu Apr 19 2012 12:19:15 GMT+0200 (CEST)"},"43":{"date":{"__isSmartRef__":true,"id":44},"author":"timfelgentreff","message":"","id":"E1AA7A8A-D3C5-4263-9A1E-91C13F532ED6"},"44":{"isSerializedDate":true,"string":"Thu Apr 19 2012 12:23:55 GMT+0200 (CEST)"},"45":{"date":{"__isSmartRef__":true,"id":46},"author":"timfelgentreff","message":"","id":"563A8831-9CE6-49D1-B87D-453B761FB751"},"46":{"isSerializedDate":true,"string":"Thu Apr 19 2012 13:12:53 GMT+0200 (CEST)"},"47":{"date":{"__isSmartRef__":true,"id":48},"author":"timfelgentreff","message":"","id":"F4CC9F23-A50B-4206-A549-A610CC9C69AC"},"48":{"isSerializedDate":true,"string":"Thu Apr 19 2012 15:11:38 GMT+0200 (CEST)"},"49":{"date":{"__isSmartRef__":true,"id":50},"author":"timfelgentreff","message":"","id":"24121E2C-3B59-48EF-8026-290C8D296496"},"50":{"isSerializedDate":true,"string":"Thu Apr 19 2012 16:02:53 GMT+0200 (CEST)"},"51":{"date":{"__isSmartRef__":true,"id":52},"author":"timfelgentreff","message":"","id":"6D9186F6-64FC-48E0-95AF-27E462A13E1D"},"52":{"isSerializedDate":true,"string":"Thu Apr 19 2012 17:55:04 GMT+0200 (CEST)"},"53":{"date":{"__isSmartRef__":true,"id":54},"author":"timfelgentreff","message":"","id":"DF45FC66-1C49-447D-914F-A905DA0AECB2"},"54":{"isSerializedDate":true,"string":"Thu Apr 19 2012 17:59:47 GMT+0200 (CEST)"},"55":{"date":{"__isSmartRef__":true,"id":56},"author":"timfelgentreff","message":"","id":"712D65D3-A68A-47B9-AFDC-B20E826217DB"},"56":{"isSerializedDate":true,"string":"Thu Apr 19 2012 18:00:26 GMT+0200 (CEST)"},"57":{"date":{"__isSmartRef__":true,"id":58},"author":"timfelgentreff","message":"a thing that renders itself onto a tile and tells the occluded tiles about the obstacle","id":"ADB36180-974D-4994-9149-6318E7F62D62"},"58":{"isSerializedDate":true,"string":"Mon Apr 23 2012 12:29:15 GMT+0200 (CEST)"},"59":{"date":{"__isSmartRef__":true,"id":60},"author":"timfelgentreff","message":"initial publish","id":"4384AF65-BA4C-424D-A5EA-E68A6EEE9E6F"},"60":{"isSerializedDate":true,"string":"Mon Apr 23 2012 13:39:23 GMT+0200 (CEST)"},"61":{"date":{"__isSmartRef__":true,"id":62},"author":"timfelgentreff","message":"add support for registering and deregistering as obstacle","id":"6E027D14-54DC-4EEE-86D7-F76CD7A727B5"},"62":{"isSerializedDate":true,"string":"Mon Apr 23 2012 14:16:57 GMT+0200 (CEST)"},"63":{"date":{"__isSmartRef__":true,"id":64},"author":"timfelgentreff","message":"fix registering","id":"C3CC144E-61B2-4154-963B-F5812D40887C"},"64":{"isSerializedDate":true,"string":"Mon Apr 23 2012 14:25:20 GMT+0200 (CEST)"},"65":{"date":{"__isSmartRef__":true,"id":66},"author":"timfelgentreff","message":"fix DNU","id":"CB97C29A-144D-4AA8-9763-C6AD0294C76D"},"66":{"isSerializedDate":true,"string":"Mon Apr 23 2012 14:31:29 GMT+0200 (CEST)"},"67":{"date":{"__isSmartRef__":true,"id":68},"author":"timfelgentreff","message":"push the right tiles to occluded tiles","id":"4756DD2F-8511-47A5-BA08-D24CB2CDB071"},"68":{"isSerializedDate":true,"string":"Mon Apr 23 2012 14:47:29 GMT+0200 (CEST)"},"69":{"date":{"__isSmartRef__":true,"id":70},"author":"timfelgentreff","message":"no comment","id":"4E20F671-CDDF-4A8C-B375-590965148158"},"70":{"isSerializedDate":true,"string":"Mon Apr 23 2012 14:48:48 GMT+0200 (CEST)"},"71":{"date":{"__isSmartRef__":true,"id":72},"author":"timfelgentreff","message":"actually register things as obstacle for the whole rectangle, not only the other stuff","id":"E15C00E6-10CD-4BEE-A685-C852A7D2B0FA"},"72":{"isSerializedDate":true,"string":"Mon Apr 23 2012 15:06:03 GMT+0200 (CEST)"},"73":{"date":{"__isSmartRef__":true,"id":74},"author":"timfelgentreff","message":"use the right index","id":"82122F19-AA93-4BE0-82A3-98068DCF0F25"},"74":{"isSerializedDate":true,"string":"Mon Apr 23 2012 15:11:07 GMT+0200 (CEST)"},"75":{"date":{"__isSmartRef__":true,"id":76},"author":"timfelgentreff","message":"no comment","id":"8B215513-36A1-4E9D-A85F-901CF829A749"},"76":{"isSerializedDate":true,"string":"Mon Apr 23 2012 15:20:02 GMT+0200 (CEST)"},"77":{"date":{"__isSmartRef__":true,"id":78},"author":"timfelgentreff","message":"fix deregister obstacle, function scope this error","id":"9107E550-ADD2-4504-90DA-7D389E5EE394"},"78":{"isSerializedDate":true,"string":"Mon Apr 23 2012 15:27:22 GMT+0200 (CEST)"},"79":{"date":{"__isSmartRef__":true,"id":80},"author":"timfelgentreff","message":"change become() so it accepts a ThingMorph as well as a name","id":"0039C1AA-215A-4BE0-AA97-F1C383BE908C"},"80":{"isSerializedDate":true,"string":"Thu May 03 2012 13:49:59 GMT+0200 (CEST)"},"81":{"date":{"__isSmartRef__":true,"id":82},"author":"tessi","message":"normal border color is transparent","id":"1665FD61-C4FA-4C51-9616-9C5E1C8B9F80"},"82":{"isSerializedDate":true,"string":"Thu May 03 2012 15:24:59 GMT+0200 (CEST)"},"83":{"replaceRenderContext":"replaceRenderContextHTML","init":"initHTML","append":"appendHTML","remove":"removeHTML","onRenderFinished":"onRenderFinishedHTML","triggerEvent":"triggerEventHTML","setTransform":"setTransformHTML","setPosition":"setPositionHTML","setRotation":"setRotationHTML","setExtent":"setExtentHTML","setScale":"setScaleHTML","setVisible":"setVisibleHTML","adjustOrigin":"adjustOriginHTML","setPivotPoint":"setPivotPointHTML","setClipMode":"setClipModeHTML","showsVerticalScrollBar":"showsVerticalScrollBarHTML","showsHorizontalScrollBar":"showsHorizontalScrollBarHTML","getScrollBarExtent":"getScrollBarExtentHTML","setHandStyle":"setHandStyleHTML","setPointerEvents":"setPointerEventsHTML","setToolTip":"setToolTipHTML","focus":"focusHTML","blur":"blurHTML","setFocusable":"setFocusableHTML"},"84":{"morph":{"__isSmartRef__":true,"id":0},"__SourceModuleName__":"Global.lively.morphic.Events","__LivelyClassName__":"lively.morphic.EventHandler"},"85":{"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":86}},"86":{"test01IsMorph":{"__isSmartRef__":true,"id":87}},"87":{"varMapping":{"__isSmartRef__":true,"id":88},"source":"function test01IsMorph(aPart) {\n    this.assert(aPart.isMorph, 'rectangle should be a morph');\n}","funcProperties":{"__isSmartRef__":true,"id":89},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"88":{"this":{"__isSmartRef__":true,"id":85}},"89":{},"90":{"x":48,"y":48,"__SourceModuleName__":"Global.lively.morphic.Graphics","__LivelyClassName__":"Point"},"91":{"setDevStyle":{"__isSmartRef__":true,"id":92},"setNormalStyle":{"__isSmartRef__":true,"id":96},"become":{"__isSmartRef__":true,"id":100},"onMouseDown":{"__isSmartRef__":true,"id":104},"toolbox":{"__isSmartRef__":true,"id":112},"zIndex":{"__isSmartRef__":true,"id":116},"becomeRandomThing":{"__isSmartRef__":true,"id":120},"reset":{"__isSmartRef__":true,"id":124},"registerAsObstacle":{"__isSmartRef__":true,"id":128},"deregisterAsObstacle":{"__isSmartRef__":true,"id":132},"tileSize":{"__isSmartRef__":true,"id":136},"dropOn":{"__isSmartRef__":true,"id":140},"map":{"__isSmartRef__":true,"id":148},"game":{"__isSmartRef__":true,"id":152}},"92":{"varMapping":{"__isSmartRef__":true,"id":93},"source":"function setDevStyle() {\n    this.setExtent(this.tileSize())\n    this.setFill(null)\n    this.shape.setBorderColor(Color.blue)\n    if (this.thing) {\n        this.thing.shape.setBorderColor(Color.red)\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":94},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"93":{"this":{"__isSmartRef__":true,"id":0}},"94":{"timestamp":{"__isSmartRef__":true,"id":95},"user":"timfelgentreff","tags":[]},"95":{"isSerializedDate":true,"string":"Mon Apr 23 2012 15:34:18 GMT+0200 (CEST)"},"96":{"varMapping":{"__isSmartRef__":true,"id":97},"source":"function setNormalStyle() {\n    this.setDevStyle()\n    this.shape.setBorderColor(new Color.rgba(0,0,0,0))\n    if (this.thing) {\n        this.thing.shape.setBorderColor(new Color.rgba(0,0,0,0))\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":98},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"97":{"this":{"__isSmartRef__":true,"id":0}},"98":{"timestamp":{"__isSmartRef__":true,"id":99},"user":"tessi","tags":[]},"99":{"isSerializedDate":true,"string":"Thu May 03 2012 15:24:43 GMT+0200 (CEST)"},"100":{"varMapping":{"__isSmartRef__":true,"id":101},"source":"function become(thingName) {\n    var thing\n    if (typeof thingName === \"string\") {\n        thing = this.toolbox(thingName + \"Thing\")\n    } else {\n        thing = thingName\n    }\n    if (thing) {\n        if (this.thing) {\n            this.thing.remove();\n        }\n        this.thing = thing;\n        thing.ignoreEvents()\n        thing.setExtent(thing.shape.getExtent())\n        thing.setPosition(this.getExtent().subPt(this.thing.getExtent()))\n        this.addMorph(thing)\n        this.registerAsObstacle()\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":102},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"101":{"this":{"__isSmartRef__":true,"id":0}},"102":{"timestamp":{"__isSmartRef__":true,"id":103},"user":"timfelgentreff","tags":[]},"103":{"isSerializedDate":true,"string":"Thu May 03 2012 13:48:50 GMT+0200 (CEST)"},"104":{"varMapping":{"__isSmartRef__":true,"id":105},"source":"function onMouseDown(evt) {\n    if (this.tile && evt.isLeftMouseButtonDown() && this.game().selectedUnit) {\n        this.game().selectedUnit.walkTo(this.tile)\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":110},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"105":{"this":{"__isSmartRef__":true,"id":0},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":106}},"106":{"$super":{"__isSmartRef__":true,"id":107}},"107":{"varMapping":{"__isSmartRef__":true,"id":108},"source":"function () {\n                    try {\n                        return obj.constructor.prototype[name].apply(obj, arguments)\n                    } catch (e) {\n                        if ($world) \n                            $world.logError(e, 'Error in $super call')\n                        else\n                            alert('Error in $super call: ' + e + '\\n' + e.stack);\n                        return null;\n                    }\n                }","funcProperties":{"__isSmartRef__":true,"id":109},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"108":{"obj":{"__isSmartRef__":true,"id":0},"name":"onMouseDown"},"109":{},"110":{"timestamp":{"__isSmartRef__":true,"id":111},"user":"tessi","tags":[]},"111":{"isSerializedDate":true,"string":"Wed Apr 25 2012 12:27:13 GMT+0200 (CEST)"},"112":{"varMapping":{"__isSmartRef__":true,"id":113},"source":"function toolbox(itemName) {\n    return this.game().toolbox(itemName)\n}","funcProperties":{"__isSmartRef__":true,"id":114},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"113":{"this":{"__isSmartRef__":true,"id":0}},"114":{"timestamp":{"__isSmartRef__":true,"id":115},"user":"tessi","tags":[]},"115":{"isSerializedDate":true,"string":"Wed Apr 25 2012 12:27:30 GMT+0200 (CEST)"},"116":{"varMapping":{"__isSmartRef__":true,"id":117},"source":"function zIndex(idx) {\n    if (idx) {\n        return this.renderContext().morphNode.style.zIndex = idx\n    } else {\n        return this.renderContext().morphNode.style.zIndex\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":118},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"117":{"this":{"__isSmartRef__":true,"id":0}},"118":{"timestamp":{"__isSmartRef__":true,"id":119},"user":"timfelgentreff","tags":[]},"119":{"isSerializedDate":true,"string":"Mon Apr 23 2012 12:28:09 GMT+0200 (CEST)"},"120":{"varMapping":{"__isSmartRef__":true,"id":121},"source":"function becomeRandomThing() {\n    var thingNames = this.game().partNamesEndingWith(\"Thing\")\n    this.become(thingNames[Math.round(Math.random() * (thingNames.length - 1))])\n}","funcProperties":{"__isSmartRef__":true,"id":122},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"121":{"this":{"__isSmartRef__":true,"id":0}},"122":{"timestamp":{"__isSmartRef__":true,"id":123},"user":"tessi","tags":[]},"123":{"isSerializedDate":true,"string":"Wed Apr 25 2012 12:26:54 GMT+0200 (CEST)"},"124":{"varMapping":{"__isSmartRef__":true,"id":125},"source":"function reset() {\n    if (this.thing) {\n        this.thing.remove()\n        this.thing = null\n    }\n    this.deregisterAsObstacle()\n    this.tile = null\n    this.setDevStyle()\n}","funcProperties":{"__isSmartRef__":true,"id":126},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"125":{"this":{"__isSmartRef__":true,"id":0}},"126":{"timestamp":{"__isSmartRef__":true,"id":127},"user":"tessi","tags":[]},"127":{"isSerializedDate":true,"string":"Wed Apr 25 2012 12:28:03 GMT+0200 (CEST)"},"128":{"varMapping":{"__isSmartRef__":true,"id":129},"source":"function registerAsObstacle() {\n    this.deregisterAsObstacle()\n\n    if (this.tile && this.thing) {\n        this.occludedTiles = []\n\n        // things are anchored at bottom-left, so neighbours direction is negative\n        var neighboursBlockVertical = Math.ceil(this.thing.getExtent().y / this.tileSize().y),\n            neighboursBlockHorizontal = Math.ceil(this.thing.getExtent().x / this.tileSize().x),\n            neighbour\n\n        this.occludedTiles.push(this.tile)\n        this.tile.addObstacle(this)\n        for (var i = 0; i < neighboursBlockHorizontal; i++) {\n            for (var j = 0; j < neighboursBlockVertical; j++) {\n                neighbour = this.tile.neighbourAt(pt(-i,-j))\n                if (neighbour && !this.occludedTiles.member(neighbour)) {\n                    neighbour.addObstacle(this)\n                    this.occludedTiles.push(neighbour)\n                }\n            }\n        }\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":130},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"129":{"this":{"__isSmartRef__":true,"id":0}},"130":{"timestamp":{"__isSmartRef__":true,"id":131},"user":"timfelgentreff","tags":[]},"131":{"isSerializedDate":true,"string":"Mon Apr 23 2012 15:18:39 GMT+0200 (CEST)"},"132":{"varMapping":{"__isSmartRef__":true,"id":133},"source":"function deregisterAsObstacle() {\n    var that = this\n    if (this.occludedTiles) {\n        this.occludedTiles.each(function (tile) {\n            tile.removeObstacle(that)\n        })\n        this.occludedTiles = null\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":134},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"133":{"this":{"__isSmartRef__":true,"id":0}},"134":{"timestamp":{"__isSmartRef__":true,"id":135},"user":"timfelgentreff","tags":[]},"135":{"isSerializedDate":true,"string":"Mon Apr 23 2012 15:25:37 GMT+0200 (CEST)"},"136":{"varMapping":{"__isSmartRef__":true,"id":137},"source":"function tileSize() {\n    if (this.tile) {\n        return this.tile.tileSize()\n    } else {\n        return this.toolbox(\"Tile\").tileSize()\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":138},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"137":{"this":{"__isSmartRef__":true,"id":0}},"138":{"timestamp":{"__isSmartRef__":true,"id":139},"user":"timfelgentreff","tags":[]},"139":{"isSerializedDate":true,"string":"Mon Apr 23 2012 14:01:00 GMT+0200 (CEST)"},"140":{"varMapping":{"__isSmartRef__":true,"id":141},"source":"function dropOn(morph) {\n    $super(morph);\n    this.deregisterAsObstacle()\n    if (morph.isTile) {\n        this.tile = morph\n        this.setPosition(pt(0,0))\n        this.registerAsObstacle()\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":146},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"141":{"this":{"__isSmartRef__":true,"id":0},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":142}},"142":{"$super":{"__isSmartRef__":true,"id":143}},"143":{"varMapping":{"__isSmartRef__":true,"id":144},"source":"function () {\n                    try {\n                        return obj.constructor.prototype[name].apply(obj, arguments)\n                    } catch (e) {\n                        if ($world) \n                            $world.logError(e, 'Error in $super call')\n                        else\n                            alert('Error in $super call: ' + e + '\\n' + e.stack);\n                        return null;\n                    }\n                }","funcProperties":{"__isSmartRef__":true,"id":145},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"144":{"obj":{"__isSmartRef__":true,"id":0},"name":"dropOn"},"145":{},"146":{"timestamp":{"__isSmartRef__":true,"id":147},"user":"timfelgentreff","tags":[]},"147":{"isSerializedDate":true,"string":"Mon Apr 23 2012 14:13:07 GMT+0200 (CEST)"},"148":{"varMapping":{"__isSmartRef__":true,"id":149},"source":"function map() {\n    return this.owner.map()\n}","funcProperties":{"__isSmartRef__":true,"id":150},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"149":{"this":{"__isSmartRef__":true,"id":0}},"150":{"timestamp":{"__isSmartRef__":true,"id":151},"user":"tessi","tags":[]},"151":{"isSerializedDate":true,"string":"Wed Apr 25 2012 12:26:34 GMT+0200 (CEST)"},"152":{"varMapping":{"__isSmartRef__":true,"id":153},"source":"function game() {\n    return this.owner.game()\n}","funcProperties":{"__isSmartRef__":true,"id":154},"__SourceModuleName__":"Global.lively.lang.Closure","__LivelyClassName__":"lively.Closure"},"153":{"this":{"__isSmartRef__":true,"id":0}},"154":{"timestamp":{"__isSmartRef__":true,"id":155},"user":"tessi","tags":[]},"155":{"isSerializedDate":true,"string":"Wed Apr 25 2012 12:26:45 GMT+0200 (CEST)"},"isSimplifiedRegistry":true}}