{"id":0,"registry":{"0":{"submorphs":[{"__isSmartRef__":true,"id":1}],"scripts":[],"id":"FC18F398-72DE-447A-B8F1-412D258E0A7B","shape":{"__isSmartRef__":true,"id":17},"grabbingEnabled":false,"droppingEnabled":false,"showsMorphMenu":true,"halosEnabled":true,"registeredForMouseEvents":true,"_Position":{"__isSmartRef__":true,"id":33},"value":false,"toggle":false,"isActive":true,"normalFill":{"__isSmartRef__":true,"id":20},"lighterFill":{"__isSmartRef__":true,"id":34},"label":{"__isSmartRef__":true,"id":1},"attributeConnections":[],"doNotSerialize":[],"doNotCopyProperties":[],"showsHalos":false,"__SourceModuleName__":"Global.lively.morphic.Widgets","padding":{"__isSmartRef__":true,"id":43},"name":"ChoiceButton","partsBinMetaInfo":{"__isSmartRef__":true,"id":44},"listMorph":null,"list":[],"renderContextTable":{"__isSmartRef__":true,"id":53},"eventHandler":{"__isSmartRef__":true,"id":54},"derivationIds":[155,"49B405ED-C1B4-413B-ADE3-B034B281B36D"],"selection":null,"_Rotation":0,"_Scale":1.0060210561262526,"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":55},"__LivelyClassName__":"lively.morphic.Button"},"1":{"submorphs":[],"scripts":[],"id":"6364109C-34E1-4FA8-9CF3-40D15D8E9E9B","shape":{"__isSmartRef__":true,"id":2},"grabbingEnabled":false,"droppingEnabled":false,"showsMorphMenu":false,"halosEnabled":true,"fixedWidth":false,"_MaxTextWidth":null,"_MaxTextHeight":null,"fixedHeight":false,"allowsInput":false,"registeredForMouseEvents":true,"_Position":{"__isSmartRef__":true,"id":8},"textColor":{"__isSmartRef__":true,"id":5},"owner":{"__isSmartRef__":true,"id":0},"eventsAreIgnored":true,"__SourceModuleName__":"Global.lively.morphic.TextCore","textChunks":[{"__isSmartRef__":true,"id":9}],"padding":{"__isSmartRef__":true,"id":11},"_Padding":{"__isSmartRef__":true,"id":11},"prevScroll":[0,0],"priorExtent":{"__isSmartRef__":true,"id":12},"attributeConnections":[{"__isSmartRef__":true,"id":13}],"doNotSerialize":["$$savedTextString"],"doNotCopyProperties":["$$savedTextString"],"renderContextTable":{"__isSmartRef__":true,"id":15},"eventHandler":{"__isSmartRef__":true,"id":16},"_HandStyle":"default","_PointerEvents":"none","_ClipMode":"visible","_WhiteSpaceHandling":"pre-wrap","_MinTextWidth":null,"_MinTextHeight":null,"derivationIds":[156,"1A53C9EF-14D5-4748-A574-99AA04AEDFE0"],"_FontFamily":"Arial, sans-serif","__LivelyClassName__":"lively.morphic.Text"},"2":{"borderWidth":0,"fill":null,"__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":{"__isSmartRef__":true,"id":3},"_Extent":{"__isSmartRef__":true,"id":4},"_BorderColor":{"__isSmartRef__":true,"id":5},"renderContextTable":{"__isSmartRef__":true,"id":6},"_ClipMode":"visible","_Padding":{"__isSmartRef__":true,"id":7},"__LivelyClassName__":"lively.morphic.Shapes.Rectangle"},"3":{"x":0,"y":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"4":{"x":116,"y":20,"__LivelyClassName__":"Point","__SourceModuleName__":"Global"},"5":{"r":0,"g":0,"b":0,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"6":{"init":"initHTML","appendShape":"renderHTML","setPosition":"setPositionHTML","setExtent":"setExtentHTML","setPadding":"setPaddingHTML","setFill":"setFillHTML","setBorderColor":"setBorderColorHTML","setBorderWidth":"setBorderWidthHTML","setStrokeOpacity":"setStrokeOpacityHTML","setBorderRadius":"setBorderRadiusHTML","setBorderStyle":"setBorderStyleHTML","setOpacity":"setOpacityHTML","setClipMode":"setClipModeHTML"},"7":{"x":0,"y":0,"width":0,"height":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Rectangle"},"8":{"x":0,"y":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"9":{"style":{"__isSmartRef__":true,"id":10},"chunkOwner":{"__isSmartRef__":true,"id":1},"storedString":"","__LivelyClassName__":"lively.morphic.TextChunk","__SourceModuleName__":"Global.lively.morphic.TextCore"},"10":{"__LivelyClassName__":"lively.morphic.TextEmphasis","__SourceModuleName__":"Global.lively.morphic.TextCore"},"11":{"x":5,"y":0,"width":0,"height":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Rectangle"},"12":{"x":116,"y":20,"__LivelyClassName__":"Point","__SourceModuleName__":"Global"},"13":{"sourceObj":{"__isSmartRef__":true,"id":1},"sourceAttrName":"savedTextString","targetObj":{"__isSmartRef__":true,"id":0},"targetMethodName":"selection","converter":null,"converterString":null,"updater":null,"updaterString":null,"varMapping":{"__isSmartRef__":true,"id":14},"__SourceModuleName__":"Global.lively.bindings","__LivelyClassName__":"AttributeConnection"},"14":{"source":{"__isSmartRef__":true,"id":1},"target":{"__isSmartRef__":true,"id":0}},"15":{"replaceRenderContext":"replaceRenderContextHTML","init":"initHTML","append":"appendHTML","remove":"removeHTML","triggerEvent":"triggerEventHTML","setTransform":"setTransformHTML","setPosition":"setPositionHTML","setRotation":"setRotationHTML","setExtent":"setExtentHTML","setScale":"setScaleHTML","setVisible":"setVisibleHTML","adjustOrigin":"adjustOriginHTML","setPivotPoint":"setPivotPointHTML","setClipMode":"setClipModeHTML","showsVerticalScrollBar":"showsVerticalScrollBarHTML","showsHorizontalScrollBar":"showsHorizontalScrollBarHTML","getScrollBarExtent":"getScrollBarExtentHTML","setHandStyle":"setHandStyleHTML","setPointerEvents":"setPointerEventsHTML","setToolTip":"setToolTipHTML","focus":"focusHTML","blur":"blurHTML","setFocusable":"setFocusableHTML","updateText":"updateTextHTML","setTextExtent":"setTextExtentHTML","setMaxTextWidth":"setMaxTextWidthHTML","setMaxTextHeight":"setMaxTextHeightHTML","setMinTextWidth":"setMinTextWidthHTML","setMinTextHeight":"setMinTextHeightHTML","getTextExtent":"getTextExtentHTML","getTextString":"getTextStringHTML","ignoreTextEvents":"ignoreTextEventsHTML","unignoreTextEvents":"unignoreTextEventsHTML","enableTextEvents":"enableTextEventsHTML","setFontFamily":"setFontFamilyHTML","setFontSize":"setFontSizeHTML","setTextColor":"setTextColorHTML","setPadding":"setPaddingHTML","setAlign":"setAlignHTML","setVerticalAlign":"setVerticalAlignHTML","setDisplay":"setDisplayHTML","setWhiteSpaceHandling":"setWhiteSpaceHandlingHTML","focusMorph":"focusMorphHTML"},"16":{"morph":{"__isSmartRef__":true,"id":1},"__SourceModuleName__":"Global.lively.morphic.Events","__LivelyClassName__":"lively.morphic.EventHandler"},"17":{"__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":{"__isSmartRef__":true,"id":18},"_Extent":{"__isSmartRef__":true,"id":19},"_Fill":{"__isSmartRef__":true,"id":20},"_BorderWidth":1,"_BorderColor":{"__isSmartRef__":true,"id":30},"_BorderRadius":5,"renderContextTable":{"__isSmartRef__":true,"id":31},"_ClipMode":"visible","_Padding":{"__isSmartRef__":true,"id":32},"__LivelyClassName__":"lively.morphic.Shapes.Rectangle"},"18":{"x":0,"y":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"19":{"x":116,"y":20,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"20":{"stops":[{"__isSmartRef__":true,"id":21},{"__isSmartRef__":true,"id":23},{"__isSmartRef__":true,"id":25},{"__isSmartRef__":true,"id":27}],"vector":{"__isSmartRef__":true,"id":29},"__SourceModuleName__":"Global.lively.morphic.Shapes","__LivelyClassName__":"lively.morphic.LinearGradient"},"21":{"offset":0,"color":{"__isSmartRef__":true,"id":22}},"22":{"r":0.9600000000000001,"g":0.9600000000000001,"b":0.9600000000000001,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"23":{"offset":0.4,"color":{"__isSmartRef__":true,"id":24}},"24":{"r":0.8200000000000001,"g":0.8200000000000001,"b":0.8200000000000001,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"25":{"offset":0.6,"color":{"__isSmartRef__":true,"id":26}},"26":{"r":0.8200000000000001,"g":0.8200000000000001,"b":0.8200000000000001,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"27":{"offset":1,"color":{"__isSmartRef__":true,"id":28}},"28":{"r":0.94,"g":0.94,"b":0.94,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"29":{"x":0,"y":0,"width":0,"height":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Rectangle"},"30":{"r":0.839,"g":0.839,"b":0.839,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"31":{"init":"initHTML","appendShape":"renderHTML","setPosition":"setPositionHTML","setExtent":"setExtentHTML","setPadding":"setPaddingHTML","setFill":"setFillHTML","setBorderColor":"setBorderColorHTML","setBorderWidth":"setBorderWidthHTML","setStrokeOpacity":"setStrokeOpacityHTML","setBorderRadius":"setBorderRadiusHTML","setBorderStyle":"setBorderStyleHTML","setOpacity":"setOpacityHTML","setClipMode":"setClipModeHTML"},"32":{"x":0,"y":0,"width":0,"height":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Rectangle"},"33":{"x":0,"y":0,"__LivelyClassName__":"Point","__SourceModuleName__":"Global"},"34":{"stops":[{"__isSmartRef__":true,"id":35},{"__isSmartRef__":true,"id":37},{"__isSmartRef__":true,"id":39},{"__isSmartRef__":true,"id":41}],"vector":{"__isSmartRef__":true,"id":29},"__SourceModuleName__":"Global.lively.morphic.Shapes","__LivelyClassName__":"lively.morphic.LinearGradient"},"35":{"offset":0,"color":{"__isSmartRef__":true,"id":36}},"36":{"r":0.98,"g":0.98,"b":0.98,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"37":{"offset":0.4,"color":{"__isSmartRef__":true,"id":38}},"38":{"r":0.91,"g":0.91,"b":0.91,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"39":{"offset":0.6,"color":{"__isSmartRef__":true,"id":40}},"40":{"r":0.91,"g":0.91,"b":0.91,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"41":{"offset":1,"color":{"__isSmartRef__":true,"id":42}},"42":{"r":0.97,"g":0.97,"b":0.97,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"43":{"x":5,"y":0,"width":0,"height":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Rectangle"},"44":{"partsSpaceName":"PartsBin/Inputs/","__SourceModuleName__":"Global.lively.PartsBin","migrationLevel":4,"partName":"ChoiceButton","comment":"Click on it and you get a list of things to choose from.","changes":[{"__isSmartRef__":true,"id":45},{"__isSmartRef__":true,"id":47},{"__isSmartRef__":true,"id":49},{"__isSmartRef__":true,"id":51}],"__LivelyClassName__":"lively.PartsBin.PartsBinMetaInfo"},"45":{"date":{"__isSmartRef__":true,"id":46},"author":"lauritz","message":"propagated changes to list behavior: selection triggered on mouse up","id":"44E90F19-32A9-4D09-A861-B9C4AF29BC10"},"46":{"isSerializedDate":true,"string":"Wed Jan 04 2012 15:26:15 GMT-0800 (PST)"},"47":{"date":{"__isSmartRef__":true,"id":48},"author":"fbo","message":"First step towards general combo box","id":"A967208D-C447-46E1-A80A-C424BF9E48E9"},"48":{"isSerializedDate":true,"string":"Mon Nov 21 2011 08:40:50 GMT-0800 (PST)"},"49":{"date":{"__isSmartRef__":true,"id":50},"author":"fbo","message":"fix trac #242","id":"39DD44C7-60AF-4B2B-8318-B64245BA6C12"},"50":{"isSerializedDate":true,"string":"Mon Dec 05 2011 10:24:16 GMT-0800 (PST)"},"51":{"date":{"__isSmartRef__":true,"id":52},"author":"lauritz","message":"fixed code indention, arial sans serif as font family for the label","id":"F9C1A155-2AE0-4212-AA49-C25482701E35"},"52":{"isSerializedDate":true,"string":"Wed Jan 04 2012 15:47:52 GMT-0800 (PST)"},"53":{"replaceRenderContext":"replaceRenderContextHTML","init":"initHTML","append":"appendHTML","remove":"removeHTML","triggerEvent":"triggerEventHTML","setTransform":"setTransformHTML","setPosition":"setPositionHTML","setRotation":"setRotationHTML","setExtent":"setExtentHTML","setScale":"setScaleHTML","setVisible":"setVisibleHTML","adjustOrigin":"adjustOriginHTML","setPivotPoint":"setPivotPointHTML","setClipMode":"setClipModeHTML","showsVerticalScrollBar":"showsVerticalScrollBarHTML","showsHorizontalScrollBar":"showsHorizontalScrollBarHTML","getScrollBarExtent":"getScrollBarExtentHTML","setHandStyle":"setHandStyleHTML","setPointerEvents":"setPointerEventsHTML","setToolTip":"setToolTipHTML","focus":"focusHTML","blur":"blurHTML","setFocusable":"setFocusableHTML"},"54":{"morph":{"__isSmartRef__":true,"id":0},"__SourceModuleName__":"Global.lively.morphic.Events","__LivelyClassName__":"lively.morphic.EventHandler"},"55":{"createListMorph":{"__isSmartRef__":true,"id":56},"getList":{"__isSmartRef__":true,"id":60},"onBlur":{"__isSmartRef__":true,"id":64},"removeList":{"__isSmartRef__":true,"id":72},"reset":{"__isSmartRef__":true,"id":76},"setList":{"__isSmartRef__":true,"id":80},"getSelection":{"__isSmartRef__":true,"id":84},"onMouseDown":{"__isSmartRef__":true,"id":88},"onSelection":{"__isSmartRef__":true,"id":96}},"56":{"varMapping":{"__isSmartRef__":true,"id":57},"source":"function createListMorph() {\n    var listMorph = new lively.morphic.List(new Rectangle(0, 0, this.getExtent().x, 100), this.getList());\n\n    listMorph.disableGrabbing();\n    listMorph.disableDragging();\n\n    connect(listMorph, 'selection', this, 'onSelection');\n\n    return listMorph;\n}","funcProperties":{"__isSmartRef__":true,"id":58},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"57":{"this":{"__isSmartRef__":true,"id":0}},"58":{"timestamp":{"__isSmartRef__":true,"id":59},"user":"lauritz","tags":[]},"59":{"isSerializedDate":true,"string":"Wed Jan 04 2012 15:46:38 GMT-0800 (PST)"},"60":{"varMapping":{"__isSmartRef__":true,"id":61},"source":"function getList() {\n    return this.list || []\n}","funcProperties":{"__isSmartRef__":true,"id":62},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"61":{"this":{"__isSmartRef__":true,"id":0}},"62":{"timestamp":{"__isSmartRef__":true,"id":63},"user":"lauritz","tags":[]},"63":{"isSerializedDate":true,"string":"Wed Jan 04 2012 15:46:38 GMT-0800 (PST)"},"64":{"varMapping":{"__isSmartRef__":true,"id":65},"source":"function onBlur(evt) {\n\n    $super(evt);\n\n    // workaround - otherwise other morphs get this event\n    var clickedMorph = evt && evt.world && evt.world.clickedOnMorph;\n    if (clickedMorph && (clickedMorph !== this && clickedMorph !== this.listMorph)) {\n        this.removeList();\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":70},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"65":{"this":{"__isSmartRef__":true,"id":0},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":66}},"66":{"$super":{"__isSmartRef__":true,"id":67}},"67":{"varMapping":{"__isSmartRef__":true,"id":68},"source":"function () {\n                try {\n                    return obj.constructor.prototype[name].apply(obj, arguments)\n                } catch(e) {\n                    alert('Error in $super call: ' + e + '\\n' + e.stack);\n                    return null;\n                }\n            }","funcProperties":{"__isSmartRef__":true,"id":69},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"68":{"obj":{"__isSmartRef__":true,"id":0},"name":"onBlur"},"69":{},"70":{"timestamp":{"__isSmartRef__":true,"id":71},"user":"lauritz","tags":[]},"71":{"isSerializedDate":true,"string":"Wed Jan 04 2012 15:46:38 GMT-0800 (PST)"},"72":{"varMapping":{"__isSmartRef__":true,"id":73},"source":"function removeList() {\n    this.listMorph && this.listMorph.remove()\n    this.listMorph = null;\n}","funcProperties":{"__isSmartRef__":true,"id":74},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"73":{"this":{"__isSmartRef__":true,"id":0}},"74":{"timestamp":{"__isSmartRef__":true,"id":75},"user":"lauritz","tags":[]},"75":{"isSerializedDate":true,"string":"Wed Jan 04 2012 15:46:38 GMT-0800 (PST)"},"76":{"varMapping":{"__isSmartRef__":true,"id":77},"source":"function reset() {\n    this.list = [];\n    this.setList([]);\n    this.label.textString = new String();\n    disconnectAll(this);\n    this.selection = null;\n    connect(this, \"selection\", this, \"onSelectionChanged\");\n    connect(this.label, \"savedTextString\", this, \"selection\", {});\n}","funcProperties":{"__isSmartRef__":true,"id":78},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"77":{"this":{"__isSmartRef__":true,"id":0}},"78":{"timestamp":{"__isSmartRef__":true,"id":79},"user":"lauritz","tags":[]},"79":{"isSerializedDate":true,"string":"Wed Jan 04 2012 15:46:38 GMT-0800 (PST)"},"80":{"varMapping":{"__isSmartRef__":true,"id":81},"source":"function setList(list) {\n    return this.list = list;\n}","funcProperties":{"__isSmartRef__":true,"id":82},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"81":{"this":{"__isSmartRef__":true,"id":0}},"82":{"timestamp":{"__isSmartRef__":true,"id":83},"user":"lauritz","tags":[]},"83":{"isSerializedDate":true,"string":"Wed Jan 04 2012 15:46:38 GMT-0800 (PST)"},"84":{"varMapping":{"__isSmartRef__":true,"id":85},"source":"function getSelection() {\n    return this.selection;\n}","funcProperties":{"__isSmartRef__":true,"id":86},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"85":{"this":{"__isSmartRef__":true,"id":0}},"86":{"timestamp":{"__isSmartRef__":true,"id":87},"user":"fbo","tags":[]},"87":{"isSerializedDate":true,"string":"Mon Nov 21 2011 08:29:59 GMT-0800 (PST)"},"88":{"varMapping":{"__isSmartRef__":true,"id":89},"source":"function onMouseDown(evt) {\n    if (evt.isCommandKey() || evt.isRightMouseButtonDown()) return $super(evt);\n\n    if (this.listMorph) {\n        // clicked on morph, not the list, not the list's scrollbar\n        if (evt.target === this.renderContext().shapeNode) \n            this.removeList();\n    } else {\n        var list = this.createListMorph();\n        this.bringToFront();\n        this.addMorph(list);\n        list.align(list.bounds().topLeft(), \n            this.shape.bounds().bottomLeft())\n        this.listMorph = list;\n    }\n    return true;\n}","funcProperties":{"__isSmartRef__":true,"id":94},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"89":{"this":{"__isSmartRef__":true,"id":0},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":90}},"90":{"$super":{"__isSmartRef__":true,"id":91}},"91":{"varMapping":{"__isSmartRef__":true,"id":92},"source":"function () {\n                try {\n                    return obj.constructor.prototype[name].apply(obj, arguments)\n                } catch(e) {\n                    alert('Error in $super call: ' + e + '\\n' + e.stack);\n                    return null;\n                }\n            }","funcProperties":{"__isSmartRef__":true,"id":93},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"92":{"obj":{"__isSmartRef__":true,"id":0},"name":"onMouseDown"},"93":{},"94":{"timestamp":{"__isSmartRef__":true,"id":95},"user":"lauritz","tags":[]},"95":{"isSerializedDate":true,"string":"Wed Jan 04 2012 15:46:58 GMT-0800 (PST)"},"96":{"varMapping":{"__isSmartRef__":true,"id":97},"source":"function onSelection(selection) {\n    this.label.textString = selection.string || selection.toString();\n    this.removeList();\n}","funcProperties":{"__isSmartRef__":true,"id":98},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"97":{"this":{"__isSmartRef__":true,"id":0}},"98":{"timestamp":{"__isSmartRef__":true,"id":99},"user":"lauritz","tags":[]},"99":{"isSerializedDate":true,"string":"Wed Jan 04 2012 15:25:12 GMT-0800 (PST)"},"isSimplifiedRegistry":true}}