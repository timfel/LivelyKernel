{"id":0,"registry":{"0":{"submorphs":[],"scripts":[],"id":"57AFF9A8-76B6-45A0-8582-329FD27C90C5","shape":{"__isSmartRef__":true,"id":1},"droppingEnabled":true,"halosEnabled":true,"registeredForMouseEvents":true,"showsHalos":false,"name":"CheapWorldLayout","partsBinMetaInfo":{"__isSmartRef__":true,"id":2},"eventHandler":{"__isSmartRef__":true,"id":34},"derivationIds":[127,"F0291F62-F100-480C-AEBF-0230398F7983","AE8B5ED7-E305-45BC-BE4A-1C28A49EE12B","39BA345C-17FA-45A0-BAC2-F0CF5654ACF8","FE91EA31-D8AE-461B-8A49-95DA5FBAE5B4","F38439A3-2F4E-4AC2-BF73-2633C00B1393","6748F5B5-2284-4748-A6EE-F1A261CBAD0B","BBAFB862-93AE-4F89-BCFF-9F1C67B7FE4C","7EC17E78-593A-4CC8-B7E3-859BCBBFE785","BAE1478B-CB11-41E8-A432-8728CEA1E8B9","2EF4FF97-F02E-411E-AF1A-7151C9D582FA","3BDF678D-D961-43BA-939C-471EB892052F","00EA2971-F34B-4A4A-9862-9E232C36D082","208CB01E-E1F6-4F05-9D28-FA2C18DC1347"],"partTests":{"__isSmartRef__":true,"id":35},"_ClipMode":"visible","moved":true,"isBeingDragged":false,"isLayouting":false,"prevScroll":[0,0],"grabbingEnabled":false,"magnets":[{"__isSmartRef__":true,"id":40},{"__isSmartRef__":true,"id":41},{"__isSmartRef__":true,"id":42},{"__isSmartRef__":true,"id":43},{"__isSmartRef__":true,"id":44},{"__isSmartRef__":true,"id":45},{"__isSmartRef__":true,"id":46},{"__isSmartRef__":true,"id":47}],"isMetaTool":true,"#startLetters":"regis","draggingEnabled":true,"eventsAreDisabled":false,"_HandStyle":"default","_PointerEvents":"auto","morphsToMove":null,"__serializedExpressions__":["_Position","distanceToDragEvent","prevDragPos"],"_Rotation":0,"_Scale":1,"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":48},"__LivelyClassName__":"lively.morphic.Box","__SourceModuleName__":"Global.lively.morphic.Core","_Position":"lively.pt(0.0,0.0)","distanceToDragEvent":"lively.pt(269.0,-13.0)","prevDragPos":"lively.pt(387.8,35.3)"},"1":{"_BorderWidth":0,"_ClipMode":"visible","_BorderRadius":0,"_Opacity":0.4523,"_BorderStyle":"solid","_AppearanceStylingMode":false,"_BorderStylingMode":false,"__serializedExpressions__":["position","_Extent","_BorderColor","_Fill","_Padding"],"__LivelyClassName__":"lively.morphic.Shapes.Rectangle","__SourceModuleName__":"Global.lively.morphic.Shapes","position":"lively.pt(0.0,0.0)","_Extent":"lively.pt(397.0,12.0)","_BorderColor":"Color.rgb(159,159,159)","_Fill":"Color.rgb(204,0,0)","_Padding":"lively.rect(0,0,0,0)"},"2":{"comment":"A very direct and cheap world layouting:\n\n- layouts all the morphs on the left ( < 100px) in vertical order\n","migrationLevel":4,"partName":"CheapWorldLayout","changes":[{"__isSmartRef__":true,"id":3},{"__isSmartRef__":true,"id":5},{"__isSmartRef__":true,"id":7},{"__isSmartRef__":true,"id":9},{"__isSmartRef__":true,"id":11},{"__isSmartRef__":true,"id":13},{"__isSmartRef__":true,"id":15},{"__isSmartRef__":true,"id":17},{"__isSmartRef__":true,"id":19},{"__isSmartRef__":true,"id":21},{"__isSmartRef__":true,"id":23},{"__isSmartRef__":true,"id":25},{"__isSmartRef__":true,"id":27},{"__isSmartRef__":true,"id":29},{"__isSmartRef__":true,"id":31}],"lastModifiedDate":{"__isSmartRef__":true,"id":33},"revisionOnLoad":193091,"partsSpaceName":"PartsBin/Jens/","__LivelyClassName__":"lively.PartsBin.PartsBinMetaInfo","__SourceModuleName__":"Global.lively.PartsBin"},"3":{"date":{"__isSmartRef__":true,"id":4},"author":"jenslincke","message":"fixes origin bug","id":"6D65B2EB-4222-4AC5-8244-5D3581FCE017"},"4":{"isSerializedDate":true,"string":"Thu Mar 14 2013 23:03:58 GMT+0100 (CET)"},"5":{"date":{"__isSmartRef__":true,"id":6},"author":"jenslincke","message":"no comment","id":"2EDE0A52-4B4A-4971-8005-F20EBD8737F7"},"6":{"isSerializedDate":true,"string":"Wed Dec 12 2012 11:09:39 GMT+0100 (CET)"},"7":{"date":{"__isSmartRef__":true,"id":8},"author":"jenslincke","message":"no comment","id":"BC03E03B-5F5A-4955-8F8E-A6CC8426C612"},"8":{"isSerializedDate":true,"string":"Wed Dec 12 2012 11:05:45 GMT+0100 (CET)"},"9":{"date":{"__isSmartRef__":true,"id":10},"author":"jenslincke","message":"no comment","id":"6AD89AC6-0BAE-4B1C-8C60-664562056C10"},"10":{"isSerializedDate":true,"string":"Thu Dec 06 2012 13:53:14 GMT+0100 (CET)"},"11":{"date":{"__isSmartRef__":true,"id":12},"author":"jenslincke","message":"no comment","id":"EA1B8910-1E9A-4884-A9B5-44DAE3DC4178"},"12":{"isSerializedDate":true,"string":"Thu Dec 06 2012 13:28:30 GMT+0100 (CET)"},"13":{"date":{"__isSmartRef__":true,"id":14},"author":"undefined","message":"whoopsie","id":"3F17A2D2-3C24-424B-B0FA-E43112267D23"},"14":{"isSerializedDate":true,"string":"Thu May 03 2012 15:51:36 GMT+0200 (CEST)"},"15":{"date":{"__isSmartRef__":true,"id":16},"author":"undefined","message":"whoopsie","id":"CEA5DCD5-2DB7-40AD-A776-262A7A0666FC"},"16":{"isSerializedDate":true,"string":"Thu May 03 2012 15:51:30 GMT+0200 (CEST)"},"17":{"date":{"__isSmartRef__":true,"id":18},"author":"undefined","message":"sorry","id":"44B56D2E-9B59-4C67-A305-49A6E10E66C2"},"18":{"isSerializedDate":true,"string":"Wed Mar 14 2012 10:53:45 GMT+0100 (CET)"},"19":{"date":{"__isSmartRef__":true,"id":20},"author":"fbo","message":"","id":"BD1C654D-9100-4B66-BC62-B15FF2498B2B"},"20":{"isSerializedDate":true,"string":"Sat Feb 25 2012 02:59:09 GMT+0100 (CET)"},"21":{"date":{"__isSmartRef__":true,"id":22},"author":"undefined","message":"css transitions","id":"1004E0FC-D96B-4F40-B3E0-F514A3FCFFD7"},"22":{"isSerializedDate":true,"string":"Wed Mar 14 2012 10:42:26 GMT+0100 (CET)"},"23":{"date":{"__isSmartRef__":true,"id":24},"author":"undefined","message":"suddenly, the rectangle became a CarDemo","id":"B5083AA8-9BAE-48DD-A6B4-FD7DB3998350"},"24":{"isSerializedDate":true,"string":"Mon Apr 09 2012 13:42:07 GMT+0200 (CEST)"},"25":{"date":{"__isSmartRef__":true,"id":26},"author":"bgnauk","message":"no comment","id":"0124E570-50B7-4CE3-83A1-6E7BA89B5CD8"},"26":{"isSerializedDate":true,"string":"Mon Jun 18 2012 19:35:08 GMT+0200 (CEST)"},"27":{"date":{"__isSmartRef__":true,"id":28},"author":"jenslincke","message":"I want my blue rectangle back!","id":"5AA9291A-869F-4D36-8095-4721B5A5B205"},"28":{"isSerializedDate":true,"string":"Thu Nov 22 2012 10:35:51 GMT+0100 (CET)"},"29":{"date":{"__isSmartRef__":true,"id":30},"author":"jenslincke","message":"no comment","id":"BDAAAA01-CAD5-49DE-8600-140BED885FE1"},"30":{"isSerializedDate":true,"string":"Wed Dec 05 2012 17:59:50 GMT+0100 (CET)"},"31":{"date":{"__isSmartRef__":true,"id":32},"author":"jenslincke","message":"no comment","id":"D84CC710-005C-4B1F-AD64-DCD4DF6B563E"},"32":{"isSerializedDate":true,"string":"Thu Mar 14 2013 23:12:02 GMT+0100 (CET)"},"33":{"isSerializedDate":true,"string":"Wed Dec 12 2012 11:09:20 GMT+0100 (CET)"},"34":{"morph":{"__isSmartRef__":true,"id":0},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"35":{"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":36}},"36":{"test01IsMorph":{"__isSmartRef__":true,"id":37}},"37":{"varMapping":{"__isSmartRef__":true,"id":38},"source":"function test01IsMorph(aPart) {\n    this.assert(aPart.isMorph, 'rectangle should be a morph');\n}","funcProperties":{"__isSmartRef__":true,"id":39},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"38":{"this":{"__isSmartRef__":true,"id":35}},"39":{},"40":{"morph":{"__isSmartRef__":true,"id":0},"connectedControlPoints":[],"__serializedExpressions__":["position","cachedGlobalPosition"],"__LivelyClassName__":"lively.morphic.RelativeMagnet","__SourceModuleName__":"Global.lively.morphic.Connectors","position":"lively.pt(0.0,0.0)","cachedGlobalPosition":"lively.pt(39.0,38.0)"},"41":{"morph":{"__isSmartRef__":true,"id":0},"connectedControlPoints":[],"__serializedExpressions__":["position","cachedGlobalPosition"],"__LivelyClassName__":"lively.morphic.RelativeMagnet","__SourceModuleName__":"Global.lively.morphic.Connectors","position":"lively.pt(0.5,0.0)","cachedGlobalPosition":"lively.pt(219.0,38.0)"},"42":{"morph":{"__isSmartRef__":true,"id":0},"connectedControlPoints":[],"__serializedExpressions__":["position","cachedGlobalPosition"],"__LivelyClassName__":"lively.morphic.RelativeMagnet","__SourceModuleName__":"Global.lively.morphic.Connectors","position":"lively.pt(1.0,0.0)","cachedGlobalPosition":"lively.pt(399.0,38.0)"},"43":{"morph":{"__isSmartRef__":true,"id":0},"connectedControlPoints":[],"__serializedExpressions__":["position","cachedGlobalPosition"],"__LivelyClassName__":"lively.morphic.RelativeMagnet","__SourceModuleName__":"Global.lively.morphic.Connectors","position":"lively.pt(1.0,0.5)","cachedGlobalPosition":"lively.pt(399.0,45.0)"},"44":{"morph":{"__isSmartRef__":true,"id":0},"connectedControlPoints":[],"__serializedExpressions__":["position","cachedGlobalPosition"],"__LivelyClassName__":"lively.morphic.RelativeMagnet","__SourceModuleName__":"Global.lively.morphic.Connectors","position":"lively.pt(1.0,1.0)","cachedGlobalPosition":"lively.pt(399.0,52.0)"},"45":{"morph":{"__isSmartRef__":true,"id":0},"connectedControlPoints":[],"__serializedExpressions__":["position","cachedGlobalPosition"],"__LivelyClassName__":"lively.morphic.RelativeMagnet","__SourceModuleName__":"Global.lively.morphic.Connectors","position":"lively.pt(0.5,1.0)","cachedGlobalPosition":"lively.pt(219.0,52.0)"},"46":{"morph":{"__isSmartRef__":true,"id":0},"connectedControlPoints":[],"__serializedExpressions__":["position","cachedGlobalPosition"],"__LivelyClassName__":"lively.morphic.RelativeMagnet","__SourceModuleName__":"Global.lively.morphic.Connectors","position":"lively.pt(0.0,1.0)","cachedGlobalPosition":"lively.pt(39.0,52.0)"},"47":{"morph":{"__isSmartRef__":true,"id":0},"connectedControlPoints":[],"__serializedExpressions__":["position","cachedGlobalPosition"],"__LivelyClassName__":"lively.morphic.RelativeMagnet","__SourceModuleName__":"Global.lively.morphic.Connectors","position":"lively.pt(0.0,0.5)","cachedGlobalPosition":"lively.pt(39.0,45.0)"},"48":{"layoutWorld":{"__isSmartRef__":true,"id":49},"startLayouting":{"__isSmartRef__":true,"id":53},"stopLayouting":{"__isSmartRef__":true,"id":57},"reset":{"__isSmartRef__":true,"id":61},"onDragStart":{"__isSmartRef__":true,"id":65},"onDrag":{"__isSmartRef__":true,"id":73},"onDragEnd":{"__isSmartRef__":true,"id":81},"findMorphsToLayout":{"__isSmartRef__":true,"id":89},"onClick":{"__isSmartRef__":true,"id":93},"toggleLayouting":{"__isSmartRef__":true,"id":97}},"49":{"varMapping":{"__isSmartRef__":true,"id":50},"source":"function layoutWorld() {\n    var space = pt(0,this.getExtent().y);\n    this.findMorphsToLayout().inject(this.bounds().bottomLeft().addPt(space),\n        function(lastPos, ea) {\n            ea.align(ea.bounds().topLeft(), lastPos);\n            return ea.bounds().bottomLeft().addPt(space)\n        }, this)\n    var halos = this.world().currentHaloTarget &&\n        this.world().currentHaloTarget.halos;\n    if (halos)\n        halos.invoke('alignAtTarget')\n}","funcProperties":{"__isSmartRef__":true,"id":51},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"50":{"this":{"__isSmartRef__":true,"id":0}},"51":{"timestamp":{"__isSmartRef__":true,"id":52},"user":"jenslincke","tags":[]},"52":{"isSerializedDate":true,"string":"Tue Mar 05 2013 18:13:04 GMT+0100 (CET)"},"53":{"varMapping":{"__isSmartRef__":true,"id":54},"source":"function startLayouting() {\n    this.isLayouting = true;\n    this.startStepping(500, \"layoutWorld\")\n}","funcProperties":{"__isSmartRef__":true,"id":55},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"54":{"this":{"__isSmartRef__":true,"id":0}},"55":{"timestamp":{"__isSmartRef__":true,"id":56},"user":"jenslincke","tags":[]},"56":{"isSerializedDate":true,"string":"Thu Dec 06 2012 12:02:28 GMT+0100 (CET)"},"57":{"varMapping":{"__isSmartRef__":true,"id":58},"source":"function stopLayouting() {\n    this.isLayouting = false;\n    this.stopStepping()\n}","funcProperties":{"__isSmartRef__":true,"id":59},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"58":{"this":{"__isSmartRef__":true,"id":0}},"59":{"timestamp":{"__isSmartRef__":true,"id":60},"user":"jenslincke","tags":[]},"60":{"isSerializedDate":true,"string":"Thu Dec 06 2012 12:01:10 GMT+0100 (CET)"},"61":{"varMapping":{"__isSmartRef__":true,"id":62},"source":"function reset() {\n    this.isMetaTool = true\n    this.enableDragging();\n\n\n    // this.registerForMouseEvents()\n    \n}","funcProperties":{"__isSmartRef__":true,"id":63},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"62":{"this":{"__isSmartRef__":true,"id":0}},"63":{"timestamp":{"__isSmartRef__":true,"id":64},"user":"jenslincke","tags":[]},"64":{"isSerializedDate":true,"string":"Wed Dec 12 2012 10:41:59 GMT+0100 (CET)"},"65":{"varMapping":{"__isSmartRef__":true,"id":66},"source":"function onDragStart(evt) {\n    this.prevDragPos = evt.getPosition();\n    this.morphsToMove = this.findMorphsToLayout();\n}","funcProperties":{"__isSmartRef__":true,"id":71},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"66":{"this":{"__isSmartRef__":true,"id":0},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":67}},"67":{"$super":{"__isSmartRef__":true,"id":68}},"68":{"varMapping":{"__isSmartRef__":true,"id":69},"source":"function () {\n                    try {\n                        return obj.constructor.prototype[name].apply(obj, arguments)\n                    } catch (e) {\n                        if ($world)\n                            $world.logError(e, 'Error in $super call')\n                        else\n                            alert('Error in $super call: ' + e + '\\n' + e.stack);\n                        return null;\n                    }\n                }","funcProperties":{"__isSmartRef__":true,"id":70},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"69":{"obj":{"__isSmartRef__":true,"id":0},"name":"onDragStart"},"70":{},"71":{"timestamp":{"__isSmartRef__":true,"id":72},"user":"jenslincke","tags":[]},"72":{"isSerializedDate":true,"string":"Wed Dec 12 2012 10:44:54 GMT+0100 (CET)"},"73":{"varMapping":{"__isSmartRef__":true,"id":74},"source":"function onDrag(evt) {\n    var delta =  evt.getPosition().subPt(this.prevDragPos)\n    this.moveBy(delta)\n    this.prevDragPos = evt.getPosition();\n    this.morphsToMove.forEach(function(ea) {\n        ea.moveBy(delta)\n    })\n}","funcProperties":{"__isSmartRef__":true,"id":79},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"74":{"this":{"__isSmartRef__":true,"id":0},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":75}},"75":{"$super":{"__isSmartRef__":true,"id":76}},"76":{"varMapping":{"__isSmartRef__":true,"id":77},"source":"function () {\n                    try {\n                        return obj.constructor.prototype[name].apply(obj, arguments)\n                    } catch (e) {\n                        if ($world)\n                            $world.logError(e, 'Error in $super call')\n                        else\n                            alert('Error in $super call: ' + e + '\\n' + e.stack);\n                        return null;\n                    }\n                }","funcProperties":{"__isSmartRef__":true,"id":78},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"77":{"obj":{"__isSmartRef__":true,"id":0},"name":"onDrag"},"78":{},"79":{"timestamp":{"__isSmartRef__":true,"id":80},"user":"jenslincke","tags":[]},"80":{"isSerializedDate":true,"string":"Wed Dec 12 2012 10:45:21 GMT+0100 (CET)"},"81":{"varMapping":{"__isSmartRef__":true,"id":82},"source":"function onDragEnd() {\n     this.morphsToMove = null;\n}","funcProperties":{"__isSmartRef__":true,"id":87},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"82":{"this":{"__isSmartRef__":true,"id":0},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":83}},"83":{"$super":{"__isSmartRef__":true,"id":84}},"84":{"varMapping":{"__isSmartRef__":true,"id":85},"source":"function () {\n                    try {\n                        return obj.constructor.prototype[name].apply(obj, arguments)\n                    } catch (e) {\n                        if ($world)\n                            $world.logError(e, 'Error in $super call')\n                        else\n                            alert('Error in $super call: ' + e + '\\n' + e.stack);\n                        return null;\n                    }\n                }","funcProperties":{"__isSmartRef__":true,"id":86},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"85":{"obj":{"__isSmartRef__":true,"id":0},"name":"onDragEnd"},"86":{},"87":{"timestamp":{"__isSmartRef__":true,"id":88},"user":"jenslincke","tags":[]},"88":{"isSerializedDate":true,"string":"Wed Dec 12 2012 10:44:37 GMT+0100 (CET)"},"89":{"varMapping":{"__isSmartRef__":true,"id":90},"source":"function findMorphsToLayout() {\n    var target = this.owner;\n    var halos = this.world().currentHaloTarget && this.world().currentHaloTarget.halos;\n    // check if dragging etc...\n    if (halos && halos.detect(function(ea) {\n            return ea.infoLabel && ea.infoLabel.owner\n        })){\n        return [];\n    }\n    return target.submorphs.select(function(ea) {\n        return (ea.bounds().topLeft().x <= this.bounds().right()) &&\n            (this.bounds().left() - 100 <= ea.bounds().left()) &&\n            (this.bounds().top() <= ea.bounds().top()) \n    }, this).reject(function(ea) {\n        return ea.isEpiMorph || (ea instanceof lively.morphic.HandMorph) \n        || ea == this\n        || ea.isMetaTool\n        || ea instanceof lively.morphic.Window\n    }, this).sortBy(function(ea) {\n        return ea.bounds().topLeft().y\n    })\n}","funcProperties":{"__isSmartRef__":true,"id":91},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"90":{"this":{"__isSmartRef__":true,"id":0}},"91":{"timestamp":{"__isSmartRef__":true,"id":92},"user":"jenslincke","tags":[]},"92":{"isSerializedDate":true,"string":"Thu Mar 14 2013 23:11:41 GMT+0100 (CET)"},"93":{"varMapping":{"__isSmartRef__":true,"id":94},"source":"function onClick(evt) {\n    \n    if (evt.isLeftMouseButtonDown()) {\n       this.toggleLayouting()\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":95},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"94":{"this":{"__isSmartRef__":true,"id":0}},"95":{"timestamp":{"__isSmartRef__":true,"id":96},"user":"jenslincke","tags":[]},"96":{"isSerializedDate":true,"string":"Wed Dec 12 2012 11:04:37 GMT+0100 (CET)"},"97":{"varMapping":{"__isSmartRef__":true,"id":98},"source":"function toggleLayouting() {\n    if (this.isLayouting) {\n        this.stopLayouting()\n        this.setFill(Color.red)\n    } else {\n        this.startLayouting()\n        this.setFill(Color.gray)\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":99},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global.lively.lang.Closure"},"98":{"this":{"__isSmartRef__":true,"id":0}},"99":{"timestamp":{"__isSmartRef__":true,"id":100},"user":"jenslincke","tags":[]},"100":{"isSerializedDate":true,"string":"Wed Dec 12 2012 11:04:24 GMT+0100 (CET)"},"isSimplifiedRegistry":true}}