{"id":0,"registry":{"0":{"submorphs":[],"scripts":[],"id":8045,"shape":{"__isSmartRef__":true,"id":1},"droppingEnabled":true,"halosEnabled":true,"registeredForMouseEvents":true,"_Position":{"__isSmartRef__":true,"id":7},"showsHalos":false,"name":"FontList","partsBinMetaInfo":{"__isSmartRef__":true,"id":8},"__SourceModuleName__":"Global.lively.morphic.Core","_Scale":1,"_ClipMode":"scroll","isCopyMorphRef":true,"morphRefId":3,"selectedFont":null,"selection":null,"renderContextTable":{"__isSmartRef__":true,"id":9},"eventHandler":{"__isSmartRef__":true,"id":10},"attributeConnections":[],"doNotSerialize":[],"doNotCopyProperties":[],"_Rotation":0,"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":11},"__LivelyClassName__":"lively.morphic.Box"},"1":{"position":{"__isSmartRef__":true,"id":2},"_Extent":{"__isSmartRef__":true,"id":3},"_BorderWidth":1,"_BorderColor":{"__isSmartRef__":true,"id":4},"_Fill":{"__isSmartRef__":true,"id":5},"__SourceModuleName__":"Global.lively.morphic.Shapes","renderContextTable":{"__isSmartRef__":true,"id":6},"__LivelyClassName__":"lively.morphic.Shapes.Rectangle"},"2":{"x":0,"y":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"3":{"x":183.7897671257631,"y":221,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"4":{"r":1,"g":1,"b":1,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"5":{"r":1,"g":1,"b":1,"a":1,"__LivelyClassName__":"Color","__SourceModuleName__":"Global"},"6":{"init":"initHTML","appendShape":"renderHTML","setPosition":"setPositionHTML","setExtent":"setExtentHTML","setFill":"setFillHTML","setBorderColor":"setBorderColorHTML","setBorderWidth":"setBorderWidthHTML","setStrokeOpacity":"setStrokeOpacityHTML","setBorderRadius":"setBorderRadiusHTML","setBorderStyle":"setBorderStyleHTML","setOpacity":"setOpacityHTML"},"7":{"x":0,"y":0,"__LivelyClassName__":"Point","__SourceModuleName__":"Global"},"8":{"partsSpaceName":"PartsBin/Text support/","__SourceModuleName__":"Global.lively.PartsBin","migrationLevel":2,"comment":"Finds out what fonts are supported in your browser and let's you choose one.","partName":"FontList","__LivelyClassName__":"lively.PartsBin.PartsBinMetaInfo"},"9":{"replaceRenderContext":"replaceRenderContextHTML","init":"initHTML","append":"appendHTML","remove":"removeHTML","triggerEvent":"triggerEventHTML","setPosition":"setPositionHTML","setRotation":"setRotationHTML","setExtent":"setExtentHTML","setScale":"setScaleHTML","setVisible":"setVisibleHTML","setOrigin":"setOriginHTML","setClipMode":"setClipModeHTML","setHandStyle":"setHandStyleHTML","setPointerEvents":"setPointerEventsHTML"},"10":{"morph":{"__isSmartRef__":true,"id":0},"__LivelyClassName__":"lively.morphic.EventHandler","__SourceModuleName__":"Global.lively.morphic.Events"},"11":{"onMouseDown":{"__isSmartRef__":true,"id":12},"reset":{"__isSmartRef__":true,"id":19},"availableFonts":{"__isSmartRef__":true,"id":22},"getKnownFonts":{"__isSmartRef__":true,"id":25},"listAvailableFonts":{"__isSmartRef__":true,"id":28},"selectFont":{"__isSmartRef__":true,"id":31},"setupConnections":{"__isSmartRef__":true,"id":34}},"12":{"varMapping":{"__isSmartRef__":true,"id":13},"source":"function onMouseDown(evt) {\n\tif (evt.isCommandKey() || !evt.isLeftMouseButtonDown()) return $super(evt);\n\tvar scroll = this.getScroll();\n\tthis.selectFont(this.localize(evt.getPosition()).addXY(scroll[0], scroll[1]));\n}","funcProperties":{"__isSmartRef__":true,"id":18},"__SourceModuleName__":"Global","__LivelyClassName__":"lively.Closure"},"13":{"this":{"__isSmartRef__":true,"id":0},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":14}},"14":{"$super":{"__isSmartRef__":true,"id":15}},"15":{"varMapping":{"__isSmartRef__":true,"id":16},"source":"function () {\n\t\t\t\ttry {\n\t\t\t\t\treturn obj.constructor.prototype[name].apply(obj, arguments)\n\t\t\t\t} catch(e) {\n\t\t\t\t\talert('Error in $super call: ' + e + '\\n' + e.stack);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}","funcProperties":{"__isSmartRef__":true,"id":17},"__SourceModuleName__":"Global","__LivelyClassName__":"lively.Closure"},"16":{"obj":{"__isSmartRef__":true,"id":0},"name":"onMouseDown"},"17":{},"18":{},"19":{"varMapping":{"__isSmartRef__":true,"id":20},"source":"function reset() {\n\tthis.selectedFont = null;\n\tthis.selection = null;\n\tthis.removeAllMorphs();\n\tdisconnectAll(this)\n}","funcProperties":{"__isSmartRef__":true,"id":21},"__SourceModuleName__":"Global","__LivelyClassName__":"lively.Closure"},"20":{"this":{"__isSmartRef__":true,"id":0}},"21":{},"22":{"varMapping":{"__isSmartRef__":true,"id":23},"source":"function availableFonts(fontNames) {\n\tvar testText = 'CmmwwmmwwmmwwmmL',\n\t\tparent = document.body,\n\t\tspan = XHTMLNS.create('span');\n\tspan.textContent = testText;\n\tspan.style.fontSize = '72px';\n\tparent.appendChild(span);\n\tvar defaultWidth = span.offsetWidth, defaultHeight = span.offsetHeight;\n\tvar availableFonts = fontNames.select(function(fontName) {\n\t\ttry {\n\t\t\tif (Global.getComputedStyle(span).fontFamily == fontName) return true;\n\t\t\tspan.style.fontFamily = fontName;\n\t\t\tvar available = defaultWidth !== span.offsetWidth || defaultHeight !== span.offsetHeight;\n\t\t\treturn available;\n\t\t} catch(e) { return false }\n\t})\n\tparent.removeChild(span)\n\treturn availableFonts;\n}","funcProperties":{"__isSmartRef__":true,"id":24},"__SourceModuleName__":"Global","__LivelyClassName__":"lively.Closure"},"23":{"this":{"__isSmartRef__":true,"id":0}},"24":{},"25":{"varMapping":{"__isSmartRef__":true,"id":26},"source":"function getKnownFonts(fontNames) {\n\treturn ['academy engraved let',\n\t\t'algerian',\n\t\t'amaze',\n\t\t'arial',\n\t\t'arial black',\n\t\t'balthazar',\n\t\t'bart',\n\t\t'bimini',\n\t\t'comic sans ms',\n\t\t'book antiqua',\n\t\t'bookman old style',\n\t\t'braggadocio',\n\t\t'britannic bold',\n\t\t'brush script mt',\n\t\t'century gothic',\n\t\t'century schoolbook',\n\t\t'chasm',\n\t\t'chicago',\n\t\t'colonna mt',\n\t\t'comic sans ms',\n\t\t'commercialscript bt',\n\t\t'coolsville ',\n\t\t'courier',\n\t\t'courier new',\n\t\t'cursive',\n\t\t'dayton',\n\t\t'desdemona',\n\t\t'fantasy',\n\t\t'flat brush ',\n\t\t'footlight mt light ',\n\t\t'futurablack bt',\n\t\t'futuralight bt',\n\t\t'garamond',\n\t\t'gaze',\n\t\t'geneva',\n\t\t'georgia',\n\t\t'geotype tt',\n\t\t'helterskelter',\n\t\t'helvetica',\n\t\t'herman',\n\t\t'highlight let',\n\t\t'impact',\n\t\t'jester',\n\t\t'joan',\n\t\t'john handy let',\n\t\t'jokerman let',\n\t\t'kelt',\n\t\t'kids',\n\t\t'kino mt',\n\t\t'la bamba let',\n\t\t'lithograph',\n\t\t'lucida console',\n\t\t'map symbols',\n\t\t'marlett',\n\t\t'matteroffact',\n\t\t'matisse itc ',\n\t\t'matura mt script capitals',\n\t\t'mekanik let',\n\t\t'monaco ',\n\t\t'monospace',\n\t\t'monotype sorts',\n\t\t'ms linedraw',\n\t\t'new york',\n\t\t'olddreadfulno7 bt',\n\t\t'orange let',\n\t\t'palatino ',\n\t\t'playbill',\n\t\t'pump demi bold let',\n\t\t'puppylike',\n\t\t'roland',\n\t\t'sans-serif',\n\t\t'scripts',\n\t\t'scruff let',\n\t\t'serif',\n\t\t'short hand',\n\t\t'signs normal',\n\t\t'simplex',\n\t\t'simpson',\n\t\t'stylus bt',\n\t\t'superfrench',\n\t\t'surfer',\n\t\t'swis721 bt',\n\t\t'swis721 blkoul bt',\n\t\t'symap',\n\t\t'symbol',\n\t\t'tahoma',\n\t\t'technic',\n\t\t'tempus sans itc',\n\t\t'terk ',\n\t\t'times',\n\t\t'times new roman',\n\t\t'trebuchet ms',\n\t\t'trendy',\n\t\t'txt',\n\t\t'verdana',\n\t\t'victorian let',\n\t\t'vineta bt',\n\t\t'vivian',\n\t\t'webdings',\n\t\t'wingdings',\n\t\t'western ',\n\t\t'westminster',\n\t\t'westwood let',\n\t\t'wide latin',\n\t\t'zapfellipt bt',\n\t\t// these are for linux\n\t\t'URW Chancery L',\n\t\t'URW Gothic L',\n\t\t'Century Schoolbook L',\n\t\t'URW Bookman L',\n\t\t'URW Palladio L',\n\t\t'Nimbus Mono L',\n\t\t'Nimbus Sans L',\n\t\t'Nimbus Roman No',\n\t\t'DejaVu Sans',\n\t\t'DejaVu Sans Mono',\n\t\t'DejaVu Serif',\n\t\t'DejaVu Sans Light',\n\t\t'Bitstream Charter',\n\t\t'DejaVu Sans Condensed',\n\t\t'DejaVu Serif Condensed',\n\t\t'Courier ',\n\t\t'Liberation Mono',\n\t\t'Liberation Serif',\n\t\t'FreeSerif',\n\t\t'Liberation Sans',\n\t\t'FreeMono',\n\t\t'FreeSans',\n\t\t'Arial',\n\t\t'Courier New',\n\t\t'Times New Roman',\n\t\t'Verdana',\n\t\t'Lohit Bengali',\n\t\t'Lohit Gujarati',\n\t\t'Lohit Punjabi',\n\t\t'Lohit Tamil',\n\t\t'UnDotum',\n\t\t'Georgia',\n\t\t'Trebuchet MS',\n\t\t'Arial Black',\n\t\t'Impact',\n\t\t'Andale Mono',\n\t\t'Bitstream Vera Sans Mono',\n\t\t'Comic Sans MS',\n\t\t'Bitstream Vera Sans',\n\t\t'Waree'].uniq().sort();\n}","funcProperties":{"__isSmartRef__":true,"id":27},"__SourceModuleName__":"Global","__LivelyClassName__":"lively.Closure"},"26":{"this":{"__isSmartRef__":true,"id":0}},"27":{},"28":{"varMapping":{"__isSmartRef__":true,"id":29},"source":"function listAvailableFonts() {\n\t/*this. listAvailableFonts()*/\n\tthis.reset();\n\tvar listMorph = this,\n\t\tfonts = this.availableFonts(this. getKnownFonts()),\n\t\toffset = pt(0,0);\n\tfonts.forEach(function(font) {\n\t\tvar text = new lively.morphic.Text(offset.extent(pt(this.getExtent().x,20)), font);\n\t\ttext.applyStyle({fill: this.getFill(), borderWidth:0, fontFamily: font, fixedHeight: false, fixedWidth: true, allowInput: false})\n\t\ttext.ignoreEvents();\n\t\tlistMorph.addMorph(text);\n\t\ttext.fit();\n\t\toffset = text.bounds().bottomLeft()\n\t}, this)\n}","funcProperties":{"__isSmartRef__":true,"id":30},"__SourceModuleName__":"Global","__LivelyClassName__":"lively.Closure"},"29":{"this":{"__isSmartRef__":true,"id":0}},"30":{},"31":{"varMapping":{"__isSmartRef__":true,"id":32},"source":"function selectFont(pos) {\n\tvar fontMorphs = this.submorphs, selected;\n\tfor (var i = 0; i < fontMorphs.length; i++) {\n\t\tif (fontMorphs[i].bounds().containsPoint(pos)) selected = fontMorphs[i];\n\t\tfontMorphs[i].setFill(null);\n\t}\n\tif (selected) {\n\t\tselected.setFill(Color.yellow);\n\t\tthis.selectedFont = selected.textString;\n\t\tthis.selection = this.selectedFont;\n\t} else {\n\t\tthis.selectedFont = null;\n\t\tthis.selection = null\n\t}\n}","funcProperties":{"__isSmartRef__":true,"id":33},"__SourceModuleName__":"Global","__LivelyClassName__":"lively.Closure"},"32":{"this":{"__isSmartRef__":true,"id":0}},"33":{},"34":{"varMapping":{"__isSmartRef__":true,"id":35},"source":"function setupConnections() {\n}","funcProperties":{"__isSmartRef__":true,"id":36},"__SourceModuleName__":"Global","__LivelyClassName__":"lively.Closure"},"35":{"this":{"__isSmartRef__":true,"id":0}},"36":{},"isSimplifiedRegistry":true}}