{"id":0,"registry":{"0":{"submorphs":[{"__isSmartRef__":true,"id":1}],"scripts":[{"__isSmartRef__":true,"id":19}],"id":"9FEF40F4-08B4-4ECB-8A6A-1C72A7FA0452","shape":{"__isSmartRef__":true,"id":20},"droppingEnabled":true,"halosEnabled":true,"registeredForMouseEvents":true,"_Position":{"__isSmartRef__":true,"id":27},"showsHalos":false,"name":"Flap","partsBinMetaInfo":{"__isSmartRef__":true,"id":28},"__SourceModuleName__":"Global.lively.morphic.Core","renderContextTable":{"__isSmartRef__":true,"id":31},"eventHandler":{"__isSmartRef__":true,"id":32},"attributeConnections":[],"doNotSerialize":[],"doNotCopyProperties":[],"derivationIds":[127],"relativePosition":{"__isSmartRef__":true,"id":33},"isBeingDragged":false,"_Rotation":0,"_Scale":1,"priorExtent":{"__isSmartRef__":true,"id":34},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":35},"__LivelyClassName__":"lively.morphic.Box"},"1":{"submorphs":[],"scripts":[],"id":"AFA51EEC-547D-469A-91F4-FBFAA9ADFE85","shape":{"__isSmartRef__":true,"id":2},"grabbingEnabled":false,"droppingEnabled":false,"halosEnabled":true,"fixedWidth":false,"fixedHeight":true,"allowsInput":true,"_FontFamily":"Arial, sans-serif","registeredForMouseEvents":true,"_Position":{"__isSmartRef__":true,"id":9},"_MaxTextWidth":null,"_MaxTextHeight":null,"textColor":{"__isSmartRef__":true,"id":5},"showsHalos":false,"_FontSize":14,"__SourceModuleName__":"Global.lively.morphic.TextCore","name":"Label","partsBinMetaInfo":{"__isSmartRef__":true,"id":10},"textChunks":[{"__isSmartRef__":true,"id":11}],"charsReplaced":"some text","lastFindLoc":-9,"priorSelectionRange":null,"prevScroll":[0,0],"priorExtent":{"__isSmartRef__":true,"id":13},"isLabel":true,"_ClipMode":"visible","_WhiteSpaceHandling":"pre-wrap","allowInput":false,"eventsAreIgnored":false,"renderContextTable":{"__isSmartRef__":true,"id":14},"eventHandler":{"__isSmartRef__":true,"id":15},"derivationIds":[2033],"attributeConnections":[],"doNotSerialize":[],"doNotCopyProperties":[],"owner":{"__isSmartRef__":true,"id":0},"_MinTextWidth":null,"_MinTextHeight":null,"previousSelection":[0,5],"_Rotation":1.570796326794897,"_Scale":1.0089332632685233,"distanceToDragEvent":{"__isSmartRef__":true,"id":16},"layout":{"__isSmartRef__":true,"id":17},"isInLayoutCycle":false,"__LivelyClassName__":"lively.morphic.Text"},"2":{"fill":null,"__SourceModuleName__":"Global.lively.morphic.Shapes","_Position":{"__isSmartRef__":true,"id":3},"_Extent":{"__isSmartRef__":true,"id":4},"_BorderWidth":0,"_BorderColor":{"__isSmartRef__":true,"id":5},"_Fill":{"__isSmartRef__":true,"id":6},"renderContextTable":{"__isSmartRef__":true,"id":7},"_ClipMode":"visible","_Padding":{"__isSmartRef__":true,"id":8},"_BorderRadius":0,"_Opacity":1,"_BorderStyle":"solid","__LivelyClassName__":"lively.morphic.Shapes.Rectangle"},"3":{"x":0,"y":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"4":{"x":48,"y":22,"__LivelyClassName__":"Point","__SourceModuleName__":"Global"},"5":{"r":0,"g":0,"b":0,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"6":{"r":1,"g":1,"b":1,"a":1,"__LivelyClassName__":"Color","__SourceModuleName__":"Global"},"7":{"init":"initHTML","appendShape":"renderHTML","setPosition":"setPositionHTML","setExtent":"setExtentHTML","setPadding":"setPaddingHTML","setFill":"setFillHTML","setBorderColor":"setBorderColorHTML","setBorderWidth":"setBorderWidthHTML","setStrokeOpacity":"setStrokeOpacityHTML","setBorderRadius":"setBorderRadiusHTML","setBorderStyle":"setBorderStyleHTML","setOpacity":"setOpacityHTML","setClipMode":"setClipModeHTML"},"8":{"x":0,"y":0,"width":0,"height":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Rectangle"},"9":{"x":-1.2000000000000455,"y":305,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"10":{"partsSpaceName":"PartsBin/Text/","__SourceModuleName__":"Global.lively.PartsBin","migrationLevel":2,"partName":"Label","__LivelyClassName__":"lively.PartsBin.PartsBinMetaInfo"},"11":{"style":{"__isSmartRef__":true,"id":12},"morph":{"__isSmartRef__":true,"id":1},"__SourceModuleName__":"Global.lively.morphic.TextCore","chunkOwner":{"__isSmartRef__":true,"id":1},"storedString":"Label","__LivelyClassName__":"lively.morphic.TextChunk"},"12":{"__SourceModuleName__":"Global.lively.morphic.TextCore","__LivelyClassName__":"lively.morphic.TextEmphasis"},"13":{"x":48,"y":22,"__LivelyClassName__":"Point","__SourceModuleName__":"Global"},"14":{"replaceRenderContext":"replaceRenderContextHTML","init":"initHTML","append":"appendHTML","remove":"removeHTML","triggerEvent":"triggerEventHTML","setTransform":"setTransformHTML","setPosition":"setPositionHTML","setRotation":"setRotationHTML","setExtent":"setExtentHTML","setScale":"setScaleHTML","setVisible":"setVisibleHTML","adjustOrigin":"adjustOriginHTML","setPivotPoint":"setPivotPointHTML","setClipMode":"setClipModeHTML","showsVerticalScrollBar":"showsVerticalScrollBarHTML","showsHorizontalScrollBar":"showsHorizontalScrollBarHTML","getScrollBarExtent":"getScrollBarExtentHTML","setHandStyle":"setHandStyleHTML","setPointerEvents":"setPointerEventsHTML","setToolTip":"setToolTipHTML","focus":"focusHTML","blur":"blurHTML","setFocusable":"setFocusableHTML","updateText":"updateTextHTML","setTextExtent":"setTextExtentHTML","setMaxTextWidth":"setMaxTextWidthHTML","setMaxTextHeight":"setMaxTextHeightHTML","setMinTextWidth":"setMinTextWidthHTML","setMinTextHeight":"setMinTextHeightHTML","getTextExtent":"getTextExtentHTML","getTextString":"getTextStringHTML","ignoreTextEvents":"ignoreTextEventsHTML","unignoreTextEvents":"unignoreTextEventsHTML","enableTextEvents":"enableTextEventsHTML","setFontFamily":"setFontFamilyHTML","setFontSize":"setFontSizeHTML","setTextColor":"setTextColorHTML","setPadding":"setPaddingHTML","setAlign":"setAlignHTML","setVerticalAlign":"setVerticalAlignHTML","setDisplay":"setDisplayHTML","setWhiteSpaceHandling":"setWhiteSpaceHandlingHTML","focusMorph":"focusMorphHTML"},"15":{"morph":{"__isSmartRef__":true,"id":1},"__SourceModuleName__":"Global.lively.morphic.Events","__LivelyClassName__":"lively.morphic.EventHandler"},"16":{"x":10,"y":-12,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"17":{"centeredVertical":false,"adjustForNewBounds":false,"resizeWidth":false,"resizeHeight":false,"layouter":{"__isSmartRef__":true,"id":18}},"18":{"defaultBorderSize":10,"defaultSpacing":15,"borderSize":10,"spacing":15,"container":{"__isSmartRef__":true,"id":1},"__SourceModuleName__":"Global.lively.morphic.Layout","__LivelyClassName__":"lively.morphic.Layout.HorizontalLayout"},"19":{"target":{"__isSmartRef__":true,"id":0},"selector":"updateScroll","args":[],"stopped":false,"tickTime":0.1,"currentTimeout":27672,"__SourceModuleName__":"Global.lively.morphic.Core","suspended":false,"__LivelyClassName__":"lively.morphic.TargetScript"},"20":{"position":{"__isSmartRef__":true,"id":21},"_Extent":{"__isSmartRef__":true,"id":22},"_BorderWidth":1,"_BorderColor":{"__isSmartRef__":true,"id":23},"_Fill":{"__isSmartRef__":true,"id":24},"__SourceModuleName__":"Global.lively.morphic.Shapes","renderContextTable":{"__isSmartRef__":true,"id":25},"_ClipMode":"visible","_Padding":{"__isSmartRef__":true,"id":26},"__LivelyClassName__":"lively.morphic.Shapes.Rectangle"},"21":{"x":0,"y":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"22":{"x":192,"y":943,"__LivelyClassName__":"Point","__SourceModuleName__":"Global"},"23":{"r":0,"g":0,"b":0,"a":1,"__SourceModuleName__":"Global","__LivelyClassName__":"Color"},"24":{"r":0,"g":0,"b":0.8,"a":1,"__LivelyClassName__":"Color","__SourceModuleName__":"Global"},"25":{"init":"initHTML","appendShape":"renderHTML","setPosition":"setPositionHTML","setExtent":"setExtentHTML","setPadding":"setPaddingHTML","setFill":"setFillHTML","setBorderColor":"setBorderColorHTML","setBorderWidth":"setBorderWidthHTML","setStrokeOpacity":"setStrokeOpacityHTML","setBorderRadius":"setBorderRadiusHTML","setBorderStyle":"setBorderStyleHTML","setOpacity":"setOpacityHTML","setClipMode":"setClipModeHTML"},"26":{"x":0,"y":0,"width":0,"height":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Rectangle"},"27":{"x":0,"y":0,"__LivelyClassName__":"Point","__SourceModuleName__":"Global"},"28":{"partsSpaceName":"PartsBin/BP2012","__SourceModuleName__":"Global.lively.PartsBin","comment":"A flap that sticks to the world boundaries","migrationLevel":4,"partName":"Rectangle","changes":[{"__isSmartRef__":true,"id":29}],"__LivelyClassName__":"lively.PartsBin.PartsBinMetaInfo"},"29":{"date":{"__isSmartRef__":true,"id":30},"author":"athomschke","message":"init","id":"935F6D4E-D375-40C7-AF70-7E3746F9B8A3"},"30":{"isSerializedDate":true,"string":"Tue Jan 24 2012 14:57:16 GMT+0100 (W. Europe Standard Time)"},"31":{"replaceRenderContext":"replaceRenderContextHTML","init":"initHTML","append":"appendHTML","remove":"removeHTML","triggerEvent":"triggerEventHTML","setTransform":"setTransformHTML","setPosition":"setPositionHTML","setRotation":"setRotationHTML","setExtent":"setExtentHTML","setScale":"setScaleHTML","setVisible":"setVisibleHTML","adjustOrigin":"adjustOriginHTML","setPivotPoint":"setPivotPointHTML","setClipMode":"setClipModeHTML","showsVerticalScrollBar":"showsVerticalScrollBarHTML","showsHorizontalScrollBar":"showsHorizontalScrollBarHTML","getScrollBarExtent":"getScrollBarExtentHTML","setHandStyle":"setHandStyleHTML","setPointerEvents":"setPointerEventsHTML","setToolTip":"setToolTipHTML","focus":"focusHTML","blur":"blurHTML","setFocusable":"setFocusableHTML"},"32":{"morph":{"__isSmartRef__":true,"id":0},"__SourceModuleName__":"Global.lively.morphic.Events","__LivelyClassName__":"lively.morphic.EventHandler"},"33":{"x":0,"y":0,"__SourceModuleName__":"Global","__LivelyClassName__":"Point"},"34":{"x":192,"y":943,"__LivelyClassName__":"Point","__SourceModuleName__":"Global"},"35":{"onTouchMove":{"__isSmartRef__":true,"id":36},"setRelativePosition":{"__isSmartRef__":true,"id":44},"updateScroll":{"__isSmartRef__":true,"id":48},"signum":{"__isSmartRef__":true,"id":52}},"36":{"varMapping":{"__isSmartRef__":true,"id":37},"source":"function onTouchMove(evt) {\n    if(this.owner!==this.world()) {\n        return;\n    }\n    var allTouches = evt.targetTouches;\n\n    if(allTouches.length==1) {\n        var touchPosition = pt(allTouches[0].pageX,allTouches[0].pageY);\n\n        // keep the current velocity up to date to make flicking possible\n        this.updateVelocity(touchPosition);\n\n        touchDifference = touchPosition.subPt(this.originalTouchPosition)\n        //alert(touchDifference)\n        this.setRelativePosition(touchDifference)\n        this.updateScroll()     \n\n\n        \n    }\n\n    if(allTouches.length==2) {\n        this.updateAngularVelocity(evt.rotation/180*Math.PI);\n        this.setScale(evt.scale*this.originalScale);\n        this.setRotation(this.originalRotation+evt.rotation/180*Math.PI);\n    }\n}","funcProperties":{"__isSmartRef__":true,"id":42},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"37":{"this":{"__isSmartRef__":true,"id":0},"__serializedLivelyClosures__":{"__isSmartRef__":true,"id":38}},"38":{"$super":{"__isSmartRef__":true,"id":39}},"39":{"varMapping":{"__isSmartRef__":true,"id":40},"source":"function () {\n                try {\n                    return obj.constructor.prototype[name].apply(obj, arguments)\n                } catch(e) {\n                    alert('Error in $super call: ' + e + '\\n' + e.stack);\n                    return null;\n                }\n            }","funcProperties":{"__isSmartRef__":true,"id":41},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"40":{"obj":{"__isSmartRef__":true,"id":0},"name":"onTouchMove"},"41":{},"42":{"timestamp":{"__isSmartRef__":true,"id":43},"user":"huberthesse","tags":[]},"43":{"isSerializedDate":true,"string":"Wed Dec 21 2011 16:59:22 GMT+0100 (W. Europe Standard Time)"},"44":{"varMapping":{"__isSmartRef__":true,"id":45},"source":"function setRelativePosition(difference) {\n    //alert(\"BEFORE:\" + this.relativePosition)\n    if (difference.x < 0) {\n        this.relativePosition.x = Math.max(0,this.getExtent().x + difference.x)\n    }\n    else {\n        this.relativePosition.x = Math.max(0,Math.min(difference.x,this.getExtent().x))\n    }\n    //alert(difference)\n    //alert(\"AFTER:\" + this.relativePosition)\n\n    if (this.relativePosition.x < 0 ){ \n        this.relativePosition = 0;}\n    //this.relativePosition.y = Math.max(0, Math.min(Math.abs(difference.y),this.getExtent().y))\n\n\n    //alert(this.relativePosition)\n}","funcProperties":{"__isSmartRef__":true,"id":46},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"45":{"this":{"__isSmartRef__":true,"id":0}},"46":{"timestamp":{"__isSmartRef__":true,"id":47},"user":"huberthesse","tags":[]},"47":{"isSerializedDate":true,"string":"Wed Dec 21 2011 17:46:02 GMT+0100 (W. Europe Standard Time)"},"48":{"varMapping":{"__isSmartRef__":true,"id":49},"source":"function updateScroll() {\n    var hoffset = window.pageXOffset;\n    var voffset = window.pageYOffset;\n    var winnerWidth = window.innerWidth;\n    var winnerHeight = window.innerHeight;\n    this.setPosition(pt(hoffset+winnerWidth-this.getExtent().x+this.relativePosition.x, voffset));\n    //middle-y: voffset+winnerHeight/2-this.getExtent().y/2\n    this.setExtent(pt(winnerWidth*0.1,winnerHeight));\n    \n\n    this.get('Label').setScale(window.innerWidth/document.documentElement.clientWidth)\n//this.get('RotatingStar').setScale(window.innerWidth/document.documentElement.clientWidth/6)\n    //alert(this.get('Label').getExtent())\n\n\n}","funcProperties":{"__isSmartRef__":true,"id":50},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"49":{"this":{"__isSmartRef__":true,"id":0}},"50":{"timestamp":{"__isSmartRef__":true,"id":51},"user":"athomschke","tags":[]},"51":{"isSerializedDate":true,"string":"Tue Jan 24 2012 14:55:36 GMT+0100 (W. Europe Standard Time)"},"52":{"varMapping":{"__isSmartRef__":true,"id":53},"source":"function signum(val) {\n     return val == 0 ? 0 : val/Math.abs(val)\n}","funcProperties":{"__isSmartRef__":true,"id":54},"__LivelyClassName__":"lively.Closure","__SourceModuleName__":"Global"},"53":{"this":{"__isSmartRef__":true,"id":0}},"54":{"timestamp":{"__isSmartRef__":true,"id":55},"user":"huberthesse","tags":[]},"55":{"isSerializedDate":true,"string":"Tue Dec 20 2011 18:06:57 GMT+0100 (W. Europe Standard Time)"},"isSimplifiedRegistry":true}}